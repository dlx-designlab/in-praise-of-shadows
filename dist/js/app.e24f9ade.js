(function(e){function t(t){for(var i,n,r=t[0],c=t[1],l=t[2],u=0,h=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&h.push(o[n][0]),o[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(h.length)h.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var i={},o={app:0},a=[];function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=i,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0222":function(e,t,s){"use strict";s("6fc5")},"0455":function(e,t,s){"use strict";s("a61b")},"055f":function(e,t,s){"use strict";s("900c")},"075a":function(e,t,s){"use strict";s("4cba")},"0d14":function(e,t,s){},"0fb2":function(e,t,s){"use strict";s("ded3")},"123f":function(e,t,s){},"160e":function(e,t,s){"use strict";s("5f4b")},1948:function(e,t,s){},2628:function(e,t,s){},"26d5":function(e){e.exports=JSON.parse('{"nav-bar":{"explore":"Explore","search":"Search","discover":"Discover"},"about":"About the project","about-the-project":"Developed as a collaboration between DLX Design Lab and University of Tokyo’s remote sensing Takeuchi Lab, this project is a virtual forest explorer for monitoring and experiencing forest ecosystems in an immersive way. The forest explorer empowers people to support more transparent forest projects and make more sustainable decisions in their daily life.","language":"Language","forest-view":{"simulating-forest":"simulating forest...","choose-entry":"Choose point of entry","biodiversity":"Biodiversity","eight-species":"species","carbon-capture":"Carbon Captured","photosynthesis":"Photosynthesis","forest-fact-one":"This forest contains nearly 2,000 species and subspecies, including some of the most ancient living trees on the planet. One example is the famous Jomon Sugi, of an age estimated between 2,170 and 7,200 years.","search-placeholder":"Search by location, project, keyword, etc...","forest-fact-two":"Protected as a UNESCO World Heritage, the forest was an inspiration for Studio Ghibli’s Princess Mononoke.<br><br>In the film, the forest spirit also called Shishigami, is known as the god of life and death. Other smaller spirits called Kodama also inhabit the Cedar forest and represent the health of the ecosystem.","forest-fact-three":"Watching all ‘Star Wars’ movies emits 6 kg of CO2. That is equivalent to a lightbulb running for 73 days. In fact, 60% of the internet’s emissions come from video streaming. <br><br>Netflix has partnered with Eden ReforestationProjects and committed to planting 1 million trees in Bolivia to reduce its carbon footprint. Netflix has also supported an employment scheme for locals through this reforestation project. ","tour-forest":"Tour the forest from another perspective","forest-bath":"Take a forest bath","vr-scan":"scan QR code to visit in VR"},"my-forest":{"account-level":"Level 5","last-active":"last active: 2/16/21 11:10AM","linked-accounts":"Linked Accounts","challenge-title":"Challenge","bike-challenge":"BIKE CHALLENGE<br>duration: 1 week","no-plastic-challenge":"NO PLASTIC CHALLENGE<br>duration: 1 day","in-progress":"in progress","score-title":"score","statistics":"statistics","rewards":"rewards","growth":"growth","activity-breakdown":"activity breakdown","long-term":"long term","incomplete":"incomplete","short-term":"short term","continue":"continue","start":"start","rain":"rain","nutrients":"nutrients","sun":"sun","my-carbon-footprint":"My Carbon Footprint"},"search-page":{"input-placeholder":"Search by location, project, keyword, etc..."},"discover-page":{"first":"Rare bird species in Brazil","second":"Timer Trafficking in the Amazon","third":"Link between forests and coronavirus","fourth":"Impact of soy products on deforestation","fifth":"Oldest tree in Asia","sixth":"Borneo forest used for Olympic Games"},"globe-page":{"about-the-project":"Text here..","valdivian":"Valdivian","maya-biosphere-reserve":"Maya Biosphere Reserve","yamanashi":"Yamanashi","yakushima":"Yakushima","kinabalu-national-park":"Kinabalu National Park","akasawa-natural-recreational-forest":"Akasawa Natural Recreational Forest","epping-forest":"Epping Forest","aya-biosphere-reserve":"Aya Biosphere Reserve"},"log-in-page":{"username":"Username","password":"Password","submit":"ENTER MY FOREST"}}')},2762:function(e,t,s){"use strict";s("de24")},"2dbb":function(e,t,s){},3982:function(e,t,s){"use strict";s("778c")},"40d8":function(e,t,s){},4838:function(e,t,s){},"4cba":function(e,t,s){},"4cc8":function(e,t,s){},"4edc":function(e,t,s){"use strict";s("7c06")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i,o,a,n,r,c,l,d,u,h,g,m,p,f,v,w,b,y,C,M,F,T,P,_,x,L,S,R,$,E,j,V,k,B,O,I,z,W,A,G,N,X,H,Y,q,D=s("2b0e"),Q=s("2247"),U=s.n(Q),J=s("a925"),K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"slowfade"}},[e.isLoading?s("div",{staticClass:"loader-container"},[s("LoadingSpinner",{attrs:{loadingMessage:e.loadingMessage}})],1):e._e()]),"mobileVR"!==e.page?s("MainUI",{attrs:{page:e.page,subPage:e.subPage,selectedForest:e.selectedForest,isLoading:e.isLoading,isInPerspectiveMode:e.isInPerspectiveMode},on:{toggleMyForestLogin:e.toggleMyForestLogin,goToSearch:e.goToSearch,goToExplore:e.goToExplore,goToDiscover:e.goToDiscover,setSubPage:e.setSubPage}}):e._e(),"mobileVR"===this.page?s("div",[s("MobileVR",{on:{hideLoader:e.hideLoader,showLoader:e.showLoader}})],1):e._e(),s("transition",{attrs:{name:"fade"}},[e.showingMyForestLogin?s("MyForestLogin",{on:{goToMyForest:e.goToMyForest}}):e._e()],1),s("transition",{attrs:{name:"slowfade"}},[e.transitioningIntoMap?s("GridTransition",{on:{finishGridTransition:e.finishGridTransition}}):e._e()],1),s("transition",{attrs:{name:"fade"}},["forestVisualisationVR"===e.page?s("div",[s("ForestVisualisationVRScreen",{attrs:{subPage:e.subPage,selectedForest:e.selectedForest},on:{goToForestMap:e.goToForestMap,goToForestVisualisation:e.goToForestVisualisation}})],1):e._e()]),s("transition",{attrs:{name:"fade"}},["myForest"===e.page?s("div",[s("MyForest",{attrs:{showingMyForestStats:e.showingMyForestStats,subPage:e.subPage,isLoading:e.isLoading},on:{hideLoader:e.hideLoader,showLoader:e.showLoader,goToMyForestVisualisationVR:e.goToMyForestVisualisationVR,goToMyForestMap:e.goToMyForestMap}})],1):e._e()]),s("transition",{attrs:{name:"fade"}},["myForestVisualisationVR"===e.page?s("div",[s("MyForestVisualisationVRScreen",{attrs:{subPage:e.subPage,showingMyForestStats:e.showingMyForestStats},on:{hideLoader:e.hideLoader,showLoader:e.showLoader,goToMyForest:e.goToMyForest,goToMyForestMap:e.goToMyForestMap}})],1):e._e()]),s("transition",{attrs:{name:"fade"}},["myForestMap"===e.page?s("div",[s("MyForestMap",{attrs:{subPage:e.subPage,showingMyForestStats:e.showingMyForestStats},on:{goToMyForestVisualisationVR:e.goToMyForestVisualisationVR,goToMyForest:e.goToMyForest,hideLoader:e.hideLoader,showLoader:e.showLoader}})],1):e._e()]),s("transition",{attrs:{name:"slowfade"}},["explore"===e.page||"search"===e.page||"discover"===e.page?s("div",[s("Globe",{attrs:{showingSearch:"search"===e.page,subPage:e.subPage},on:{selectForestOnGlobe:e.selectForestOnGlobe,goToForestMap:e.goToForestMap,startGridTransition:e.startGridTransition}})],1):e._e()]),s("transition",{attrs:{name:"fade"}},["forestVisualisation"===e.page?s("div",[s("ForestVisualisation",{attrs:{selectedForest:e.selectedForest,subPage:e.subPage,loadLocationTwo:e.loadLocationTwo},on:{goToForestMap:e.goToForestMap,goToForestVisualisationVR:e.goToForestVisualisationVR,hideLoader:e.hideLoader,showLoader:e.showLoader,setToPerspectiveMode:e.setToPerspectiveMode}})],1):e._e()]),s("transition",{attrs:{name:"slowfade"}},["forestMap"===e.page?s("div",[s("ForestMap",{attrs:{selectedForest:e.selectedForest,subPage:e.subPage,isLoading:e.isLoading},on:{closeForestMap:e.closeForestMap,goToForestVisualisationVR:e.goToForestVisualisationVR,hideLoader:e.hideLoader,showLoader:e.showLoader,hideGridTransition:e.hideGridTransition}})],1):e._e()]),s("transition",{attrs:{name:"fade"}},["forestBath"===e.page?s("div",[s("ForestBath",{attrs:{selectedForestBath:e.selectedForestBath,selectedForestBathView:e.selectedForestBathView},on:{toggleMyForest:e.toggleMyForest,hideLoader:e.hideLoader,showLoader:e.showLoader,goToForestBathBird:e.goToForestBathBird}})],1):e._e()]),s("transition",{attrs:{name:"fade"}},["forestBathBird"===e.page?s("div",[s("ForestBathBird",{attrs:{selectedForestBath:e.selectedForestBath},on:{toggleMyForest:e.toggleMyForest,hideLoader:e.hideLoader,showLoader:e.showLoader,goToForestBath:e.goToForestBath}})],1):e._e()]),s("transition",{attrs:{name:"fade"}},["discover"===e.page?s("div",[s("Discover")],1):e._e()])],1)},Z=[],ee=(s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("ac1f"),s("841c"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"globe-container"},[s("transition",{attrs:{name:"fade"}},[s("GlobeTooltip",{attrs:{hoveredPoint:e.hoveredPoint,mouseX:e.mouseX,mouseY:e.mouseY}})],1),s("transition",{attrs:{name:"fade"}},[e.showingSearch?s("LibrarySearch",{on:{goToForestMap:e.goToForestMap}}):e._e()],1),s("transition",{attrs:{name:"slowfade"}},[s("GlobeLogos",{directives:[{name:"show",rawName:"v-show",value:1===e.subPage,expression:"subPage === 1"}],on:{goToForestMap:e.goToForestMap}})],1),s("div",{ref:"three",staticClass:"three-container"})],1)}),te=[],se=s("53ca"),ie=s("b85c"),oe=(s("a9e3"),s("b0c0"),s("b64b"),s("5a89")),ae=s("22b5"),ne=s("ab27"),re=s("4721"),ce=s("8629"),le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"tooltipContainer",attrs:{id:"tooltip-container"}},[s("transition",{attrs:{name:"fade"}},[e.hoveredPoint?s("div",[s("div",{staticClass:"tooltip"},[s("p",[e._v(e._s(e.forestName))])])]):e._e()])],1)},de=[],ue=s("3835"),he=(s("4de4"),{name:"Tooltip",props:{hoveredPoint:String,mouseX:Number,mouseY:Number},computed:{forestName:function(){var e=this;if("en"===this.$i18n.locale)return this.hoveredPoint;var t=ce.filter((function(t){return t.name===e.hoveredPoint})),s=Object(ue["a"])(t,1),i=s[0];return i.jp_name}},watch:{mouseX:function(){this.moveToolTip()},mouseY:function(){this.moveToolTip()}},methods:{moveToolTip:function(){this.hoveredPoint&&(this.$refs.tooltipContainer.style.left="".concat(this.mouseX+50,"px"),this.$refs.tooltipContainer.style.top="".concat(this.mouseY,"px"))}}}),ge=he,me=(s("66d7"),s("2877")),pe=Object(me["a"])(ge,le,de,!1,null,"1eba0bb8",null),fe=pe.exports,ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"library-search-container"},[s("div",{staticClass:"search-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:e.$t("forest-view.search-placeholder")},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._m(0),s("div",{staticClass:"results-container"},[e.search.length>1?s("ul",{staticClass:"results-list"},e._l(e.filteredList,(function(t){return s("li",{key:t.id,on:{click:function(s){return e.goToForestMap(t.name)}}},[s("span",{staticClass:"result name"},[e._v(e._s(t.name))]),e._v(", "),s("span",{staticClass:"result"},[e._v(" "+e._s(t.country)+", "+e._s(t.type)+", "+e._s(t.lat)+" "+e._s(t.lon)+" ")])])})),0):e._e(),e.search.length>1&&e.filteredList.length>15?s("div",{staticClass:"down-arrow"},[e._v(" \\/ ")]):e._e()])])])},we=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"filtered-search"},[s("img",{staticClass:"filtered-search-icon",attrs:{src:"/images/ui/search-icon.png"}})])}],be=(s("caad"),s("2532"),{name:"librarySearch",data:function(){return{FOREST_DATA:ce,search:""}},computed:{filteredList:function(){var e=this,t=[];return ce.filter((function(s){s.name.toLowerCase().includes(e.search.toLowerCase())&&t.push(s),s.country.toLowerCase().includes(e.search.toLowerCase())&&t.push(s),s.type.toLowerCase().includes(e.search.toLowerCase())&&t.push(s)})),t}},methods:{goToForestMap:function(e){this.$emit("goToForestMap",e)}}}),ye=be,Ce=(s("b4e6"),Object(me["a"])(ye,ve,we,!1,null,"6e83fa94",null)),Me=Ce.exports,Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"globe-logos-container"},[s("div",{staticClass:"globe-logos"},[s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo netflix",attrs:{src:"/images/brand-logos/Netflix.png"},on:{click:function(t){return e.goToForest("Netflix")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo lyft",attrs:{src:"/images/brand-logos/Lyft.png"},on:{click:function(t){return e.goToForest("Lyft")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo ecosia",attrs:{src:"/images/brand-logos/Ecosia.png"},on:{click:function(t){return e.goToForest("Ecosia")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo airfrance",attrs:{src:"/images/brand-logos/Airfrance.png"},on:{click:function(t){return e.goToForest("Airfrance")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo toyoshima",attrs:{src:"/images/brand-logos/Toyoshima.png"},on:{click:function(t){return e.goToForest("Toyoshima")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo nike",attrs:{src:"/images/brand-logos/Nike.png"},on:{click:function(t){return e.goToForest("Nike")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo nestle",attrs:{src:"/images/brand-logos/Nestle.png"},on:{click:function(t){return e.goToForest("Nestle")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo timberland",attrs:{src:"/images/brand-logos/Timberland.png"},on:{click:function(t){return e.goToForest("Timberland")}}})]),s("div",{staticClass:"logo-container"},[s("img",{staticClass:"logo adidas",attrs:{src:"/images/brand-logos/Adidas.png"},on:{click:function(t){return e.goToForest("Adidas")}}})])])])},Te=[],Pe={name:"logos",methods:{goToForest:function(e){this.$emit("goToForestMap",e)}}},_e=Pe,xe=(s("67b6"),Object(me["a"])(_e,Fe,Te,!1,null,"f4fa2608",null)),Le=xe.exports,Se=[],Re=new oe["ab"],$e=new oe["tb"],Ee=new oe["P"]({color:16777215,transparent:!1,opacity:1,metalness:.1,roughness:.4,refractionRatio:.4}),je=new oe["P"]({color:16711680,transparent:!1,opacity:1,metalness:.1,roughness:.4,refractionRatio:.4}),Ve={name:"globe",components:{GlobeTooltip:fe,LibrarySearch:Me,GlobeLogos:Le},props:{backgrounded:Boolean,showingSearch:Boolean,subPage:Number},watch:{subPage:function(e){0===e?new ae["a"].Tween(i.target).to({x:0,y:0,z:0},1e3).easing(ae["a"].Easing.Quartic.InOut).start():1===e&&new ae["a"].Tween(i.target).to({x:0,y:-350,z:0},1e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()}},data:function(){return{animating:!0,hoveredPoint:null,hoveredPointSphere:null,mouseX:0,mouseY:0,transitioningIn:!1}},mounted:function(){var e=new oe["mb"],t=e.load("/images/earth-globe-2-normal-min.jpeg");n=new ne["a"]({waitForGlobeReady:!1}).globeImageUrl("/images/earth-globe-2-min.jpeg").bumpImageUrl(t),n.children[0].children[0].children[0].material.shininess=15,a=new oe["xb"]({antialias:!0}),a.setSize(window.innerWidth,window.innerHeight),a.setClearColor(0,1),a.setPixelRatio(1),document.querySelector(".three-container").appendChild(a.domElement),o=new oe["bb"],o.add(n),o.add(new oe["a"](16777215,.5));var s=new oe["l"](16777215,.5);o.add(s);var c=n.globeMaterial();c.specularMap=t,c.specular=new oe["g"](16777215),c.shininess=15,r=new oe["T"](45,window.innerWidth/window.innerHeight,100,1e3),r.updateProjectionMatrix(),i=new re["a"](r,a.domElement),i.autoRotate=!0,i.enableZoom=!1,i.autoRotateSpeed=1,window.innerWidth<600?r.position.z=500:r.position.z=400,this.animate(),a.setPixelRatio(2),this.createPointsAtLocation(),this.createStars(),this.bindEvents()},methods:{createStars:function(){for(var e=[],t=0;t<2500;t+=1){var s=oe["I"].randFloatSpread(500),i=oe["I"].randFloatSpread(500),a=oe["I"].randFloatSpread(500);e.push(s,i,a)}var n=new oe["e"];n.setAttribute("position",new oe["q"](e,3));var r=new oe["X"]({color:16777215}),c=new oe["W"](n,r);o.add(c)},goToForestVisualisation:function(e){this.$emit("goToForestVisualisation",e)},createPointsAtLocation:function(){for(var e=new oe["gb"](3,12,12),t=new oe["K"](e,Ee),s=0;s<ce.length;s+=1){var i=t.clone(),a=n.getCoords(ce[s].lat,ce[s].lon,0);"en"===this.$i18n.locale?i.name=ce[s].name:i.name=ce[s].jp_name,i.position.set(a.x,a.y,a.z),o.add(i),Se.push(i)}new ae["a"].Tween(t.material).to({opacity:.6},3e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},makeSphereRed:function(e){e.material=je},makeSphereWhite:function(e){e.material=Ee},raycast:function(){var e=this;Re.setFromCamera($e,r);var t=Re.intersectObjects(Se,!1);t.length>0?(this.hoveredPointSphere=t[0].object,this.hoveredPoint=t[0].object.name,i.autoRotate=!1,document.body.style.cursor="pointer",this.makeSphereRed(this.hoveredPointSphere)):(this.hoveredPointSphere&&Se.forEach((function(t){e.makeSphereWhite(t)})),this.hoveredPointSphere=null,this.hoveredPoint=null,document.body.style.cursor="grab",i.autoRotate=!0)},updateMousePosition:function(){var e=a.domElement.getBoundingClientRect();$e.x=(this.mouseX-e.left)/e.width*2-1,$e.y=-(this.mouseY-e.top)/e.height*2+1,Se.length>0&&this.raycast()},onMouseMove:function(e){e.preventDefault(),this.mouseX=e.clientX,this.mouseY=e.clientY},bindEvents:function(){this.$refs.three.addEventListener("mousemove",this.onMouseMove),this.$refs.three.addEventListener("touchmove",this.onTouchMove),this.$refs.three.addEventListener("click",this.onClick)},goToForestMap:function(e){this.$emit("goToForestMap",e)},shuffleArray:function(e){for(var t=e.length-1;t>0;t-=1){var s=Math.floor(Math.random()*(t+1)),i=[e[s],e[t]];e[t]=i[0],e[s]=i[1]}return e},startGridTransition:function(){},onClick:function(){if(this.hoveredPoint){var e=this.hoveredPoint;this.$emit("startGridTransition",e);var t=this.hoveredPointSphere.position.clone(),s=t.multiplyScalar(3.001);new ae["a"].Tween(r.position).to({x:s.x,y:s.y,z:s.z},2e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()}},onTouchMove:function(e){this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY},destroyScene:function(){a.renderLists.dispose(),a.dispose(),n=null,o.traverse((function(e){if(e.geometry&&e.geometry.dispose(),e.material)if(e.material.isMaterial)e.material.dispose();else{var t,s=Object(ie["a"])(e.material);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.dispose()}}catch(c){s.e(c)}finally{s.f()}}if(e.isMesh){e.geometry.dispose();var o=function(e){e.dispose();for(var t=0,s=Object.keys(e);t<s.length;t++){var i=s[t],o=e[i];o&&"object"===Object(se["a"])(o)&&"minFilter"in o&&o.dispose()}};if(e.material.isMaterial);else{var a,n=Object(ie["a"])(e.material);try{for(n.s();!(a=n.n()).done;){var r=a.value;o(r)}}catch(c){n.e(c)}finally{n.f()}}}}))},animate:function(){var e=this,t=function(){e.animating&&(requestAnimationFrame(e.animate),i.update(),a.render(o,r),ae["a"].update(),e.updateMousePosition())};t()}},beforeDestroy:function(){this.animating=!1,this.destroyScene(),a.domElement=null,i.dispose(),a=null,o=null,r=null,window.removeEventListener("resize",this.onWindowResize),this.$refs.three.removeEventListener("mousemove",this.onMouseMove),this.$refs.three.removeEventListener("touchmove",this.onTouchMove),this.$refs.three.removeEventListener("click",this.onClick)}},ke=Ve,Be=(s("6e3b"),Object(me["a"])(ke,ee,te,!1,null,"c1c29980",null)),Oe=Be.exports,Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["main-ui-container",{"is-fixed":"discover"===e.page}]},[s("div",{staticClass:"top-buttons-container"},[s("button",{class:["top-button",{selected:"explore"===e.page||"forestBath"===e.page}],on:{click:e.goToExplore}},[s("span",[e._v(e._s(e.$t("nav-bar.explore")))])]),s("button",{class:["top-button",{selected:"search"===e.page||"forestVisualisation"===e.page||"forestMap"===e.page}],on:{click:e.goToSearch}},[s("span",[e._v(e._s(e.$t("nav-bar.search")))])]),s("button",{class:["top-button",{selected:"discover"===e.page}],on:{click:e.goToDiscover}},[s("span",[e._v(e._s(e.$t("nav-bar.discover")))])])]),s("div",{staticClass:"my-forest-btn-container"},[s("button",{class:["my-forest-btn"],on:{click:e.goToMyForest}},[s("img",{staticClass:"my-forest-icon",attrs:{src:"/images/ui/my-forest-icon.png"}})])]),s("transition",{attrs:{name:"fade"}},[e.showingInfoBox?s("div",{staticClass:"info-box"},[s("h1",{domProps:{innerHTML:e._s(e.$t(e.getInfoHeader))}}),s("p",{staticClass:"info-text",domProps:{innerHTML:e._s(e.$t(e.getInfoText))}}),s("p",{staticClass:"language-select"},[s("span",{staticClass:"language"},[e._v(" "+e._s(e.$t("language"))+": ")]),s("span",{staticClass:"language-choices"},[s("span",{class:[{"selected-lang":"en"===e.$i18n.locale}],on:{click:e.toggleLang}},[e._v(" EN ")]),e._v(" / "),s("span",{class:[{"selected-lang":"jp"===e.$i18n.locale}],on:{click:e.toggleLang}},[e._v(" JP ")])])])]):e._e()]),s("transition",{attrs:{name:"fade"}},[e.showingInfoIcon?s("div",{staticClass:"info-icon-container"},[s("img",{staticClass:"info-icon inverted",attrs:{src:"/images/info-icon-inverted.png"},on:{click:e.showInfoBox}})]):e._e()]),s("transition",{attrs:{name:"fade"}},[e.showingGlobeIcon?s("div",{staticClass:"info-icon-container"},[s("img",{staticClass:"globe-icon",attrs:{src:e.getGlobeToShow}})]):e._e()]),s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"side-menu-container"},[e.showingSideMenu?s("div",{staticClass:"side-menu"},[s("div",{class:["side-button one",{selected:0===e.subPage}],on:{click:e.sideButtonOneHandler}}),s("div",{class:["side-button two",{selected:1===e.subPage}],on:{click:e.sideButtonTwoHandler}}),e.showingSideButtonThree?s("div",{class:["side-button three",{selected:2===e.subPage}],on:{click:e.sideButtonThreeHandler}}):e._e()]):e._e()])])],1)},ze=[],We=(s("2af1"),["Netflix","Lyft","Ecosia","Airfrance","Toyoshima","Nike","Nestle","Timberland","Adidas"]),Ae={name:"ui",props:{page:String,subPage:Number,selectedForest:String,isLoading:Boolean,isInPerspectiveMode:Boolean},mounted:function(){var e=this;window.addEventListener("wheel",(function(t){var s=Math.sign(t.deltaY);"explore"===e.page&&(-1===s&&(1===e.subPage?e.sideButtonOneHandler():2===e.subPage&&e.sideButtonTwoHandler()),1===s&&(0===e.subPage?e.sideButtonTwoHandler():1===e.subPage&&e.showingSideButtonThree&&e.sideButtonThreeHandler()))}))},computed:{showingSideMenu:function(){return!this.isLoading&&("explore"===this.page||"search"===this.page)},isBrandedForest:function(){return!!We.includes(this.selectedForest)},getGlobeToShow:function(){return"Valdivian"===this.selectedForest?"/images/ui/globes/5.png":"Maya Biosphere Reserve"===this.selectedForest?"/images/ui/globes/7.png":"Yamanashi"===this.selectedForest?"/images/ui/globes/3.png":"Yakushima"===this.selectedForest?"/images/ui/globes/1.png":"Kinabalu National Park"===this.selectedForest?"/images/ui/corner-globe.png":"Akasawa Natural Recreational Forest"===this.selectedForest?"/images/ui/globes/3.png":"Epping Forest"===this.selectedForest?"/images/ui/globes/6.png":"Aya Biosphere Reserve"===this.selectedForest?"/images/ui/globes/1.png":"/images/ui/corner-globe.png"},showingSideButtonThree:function(){return"myForest"===this.page||"forestVisualisation"===this.page||"forestMap"===this.page||"forestVisualisationVR"===this.page||"myForestVisualisationVR"===this.page||"myForestMap"===this.page},getInfoText:function(){return"explore"===this.page?"about-the-project":"forestBath"===this.page?"Shinrin-yoku (森林浴) is the Japanese practice of forest bathing as a modern form of healing.<br><br>Select different soundscapes and characters to immerse in a digital shinrin-yoku.":"forestVisualisation"===this.page&&"Yakushima"===this.selectedForest?"forest-fact-one":"forestVisualisation"===this.page&&"Netflix"===this.selectedForest?"forest-fact-three":"forestVisualisation"===this.page&&this.isBrandedForest?"You are currently viewing ".concat(this.selectedForest,"'s forest, home to over 10 species of tree."):"You are currently in ".concat(this.selectedForest,", home to over 14 species of tree and 1000 species of bird.")},getInfoHeader:function(){return"explore"===this.page?"about":"forestBath"===this.page?"Shinrin-yoku (森林浴) is the Japanese practice of forest bathing as a modern form of healing.<br><br>Select different soundscapes and characters to immerse in a digital shinrin-yoku.":"forestVisualisation"===this.page?"":"placeholder"},showingInfoIcon:function(){return console.log(this.selectedForest),!this.isLoading&&"explore"===this.page||"globe"===this.page},showingGlobeIcon:function(){return"forestVisualisation"===this.page||"forestMap"===this.page}},data:function(){return{showingInfoBox:!1}},methods:{toggleLang:function(){"en"===this.$i18n.locale?this.$i18n.locale="jp":this.$i18n.locale="en",this.showingInfoBox=!1},showInfoBox:function(){this.showingInfoBox=!this.showingInfoBox},goToExplore:function(){this.$emit("goToExplore")},goToSearch:function(){this.$emit("goToSearch")},goToDiscover:function(){this.$emit("goToDiscover")},goToMyForest:function(){this.$emit("toggleMyForestLogin")},sideButtonOneHandler:function(){this.$emit("setSubPage",0)},sideButtonTwoHandler:function(){this.$emit("setSubPage",1)},sideButtonThreeHandler:function(){this.$emit("setSubPage",2)}}},Ge=Ae,Ne=(s("cff1"),Object(me["a"])(Ge,Ie,ze,!1,null,"990afa3a",null)),Xe=Ne.exports,He=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"root"},[s("div",{ref:"three",staticClass:"scene-container"}),e._m(0),s("transition",{attrs:{name:"fade"}},[e.isLoaded?s("div",[s("ForestBathUI",{attrs:{selectedForestBath:e.selectedForestBath},on:{showBirdView:e.showBirdView,showSquirrelView:e.showSquirrelView,showInsectView:e.showInsectView}})],1):e._e()])],1)},Ye=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("audio",{attrs:{autoplay:"",loop:""}},[s("source",{attrs:{src:"/audio/forest-sounds.mp3",type:"audio/mpeg"}})])}],qe=(s("99af"),s("21cb")),De=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"forest-bath-ui-container"},[s("transition",{attrs:{name:"fade"}},[e.showingRadar?s("div",{staticClass:"radar-container"},[s("img",{staticClass:"radar-bg",attrs:{src:"/images/radar.png"}}),s("img",{staticClass:"icon squirrel",attrs:{src:"/images/squirrel.png"},on:{click:e.showSquirrelView}}),s("img",{staticClass:"icon bird",attrs:{src:"/images/bird.png"},on:{click:e.showBirdView}}),s("img",{staticClass:"icon insect",attrs:{src:"/images/insect.png"},on:{click:e.showInsectView}})]):e._e()]),s("div",{staticClass:"radar-icon-container"},[s("img",{staticClass:"radar-icon",attrs:{src:"/images/radar-icon.png"},on:{click:e.toggleRadar}})])],1)},Qe=[],Ue={name:"forest-bath-ui",props:{selectedForestBath:String},data:function(){return{showingRadar:!1}},methods:{toggleRadar:function(){this.showingRadar=!this.showingRadar},showBirdView:function(){this.$emit("showBirdView"),this.showingRadar=!1},showInsectView:function(){this.$emit("showInsectView"),this.showingRadar=!1},showSquirrelView:function(){this.$emit("showSquirrelView"),this.showingRadar=!1}}},Je=Ue,Ke=(s("aefc"),Object(me["a"])(Je,De,Qe,!1,null,"7432caae",null)),Ze=Ke.exports,et=new oe["G"],tt=new qe["a"](et),st=window.innerWidth,it=window.innerHeight,ot=new oe["tb"],at=new oe["tb"],nt=new oe["tb"](window.innerWidth/2,window.innerHeight/2),rt={name:"Tree",data:function(){return{isLoaded:!1,animating:!0}},props:{selectedForestBath:String,selectedForestBathView:String},components:{ForestBathUI:Ze},mounted:function(){c=new oe["T"](70,st/it,.01,15e3),c.position.set(-250,250,-250),l=new oe["xb"]({antialias:!1,alpha:!1}),l.setSize(st,it),d=new oe["bb"],d.add(c),this.setupRenderer(),this.setupLights(),this.bindEvents(),this.onWindowResize();var e=this;tt.load("./models/baths/flora-point_cloud.ply",(function(t){u=new oe["W"](t,new oe["X"]({size:1,vertexColors:oe["wb"]})),u.geometry.computeBoundingBox(),u.geometry.center(),u.scale.set(35,35,35),u.rotation.y=Math.PI/2,d.add(u),e.animate()}))},methods:{showBirdView:function(){this.$emit("goToForestBathBird"),c.fov=70,c.updateProjectionMatrix()},showSquirrelView:function(){c.position.set(-40,-140,-50),c.fov=70,c.updateProjectionMatrix()},showInsectView:function(){c.position.set(-40,-240,-50),c.fov=20,c.updateProjectionMatrix()},onMouseMove:function(e){ot.x=e.clientX-nt.x,ot.y=e.clientY-nt.x},animate:function(){var e=this,t=function t(){e.animating&&(l.render(d,c),requestAnimationFrame(t),ae["a"].update(),at.x=.002*(1-ot.x),at.y=.002*(1-ot.y),c.rotation.x+=.05*(at.y-c.rotation.x),c.rotation.y+=.05*(at.x-c.rotation.y))};t()},setupRenderer:function(){l.setClearColor(16777215,0),l.gammaOutput=!0,l.gammaFactor=1,l.setSize(st,it),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.$refs.three.appendChild(l.domElement)},setupLights:function(){var e=new oe["a"](16777215,1);d.add(e)},tweenOut:function(){var e=new oe["ub"];"insect"===this.selectedForestBathView?(e.x=-40,e.y=-240,e.z=-50,c.fov=20,c.updateProjectionMatrix()):(e.x=-40,e.y=-140,e.z=-50),new ae["a"].Tween(c.position).to({x:e.x,y:e.y,z:e.z},5e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start(),new ae["a"].Tween(u.rotation).to({y:0},5e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},bindEvents:function(){var e=this;this.$refs.three.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.onWindowResize,!1),et.onStart=function(){e.isLoaded=!1,e.$emit("showLoader","loading forest...")},et.onProgress=function(e,t,s){console.log("Loading file: ".concat(e,".\nLoaded ").concat(t," of ").concat(s," files."))},et.onLoad=function(){e.isLoaded=!0,e.$emit("hideLoader"),e.tweenOut()}},onWindowResize:function(){st=window.innerWidth,it=window.innerHeight,l.setSize(st,it),c.aspect=st/it,c.updateProjectionMatrix()},destroyScene:function(){d.remove(u),l.renderLists.dispose(),l.dispose(),u=null,d.traverse((function(e){if(e.geometry&&e.geometry.dispose(),e.material)if(e.material.isMaterial)e.material.dispose();else{var t,s=Object(ie["a"])(e.material);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.dispose()}}catch(c){s.e(c)}finally{s.f()}}if(e.isMesh){e.geometry.dispose();var o=function(e){e.dispose();for(var t=0,s=Object.keys(e);t<s.length;t++){var i=s[t],o=e[i];o&&"object"===Object(se["a"])(o)&&"minFilter"in o&&o.dispose()}};if(e.material.isMaterial)o(e.material);else{var a,n=Object(ie["a"])(e.material);try{for(n.s();!(a=n.n()).done;){var r=a.value;o(r)}}catch(c){n.e(c)}finally{n.f()}}}}))}},beforeDestroy:function(){this.destroyScene(),this.animating=!1,l.domElement=null,l=null,d=null,c=null,window.removeEventListener("resize",this.onWindowResize),this.$refs.three.removeEventListener("mousemove",this.onMouseMove)}},ct=rt,lt=(s("7bdd"),Object(me["a"])(ct,He,Ye,!1,null,"42e3162a",null)),dt=lt.exports,ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"root"},[s("div",{ref:"three",staticClass:"scene-container"}),s("ForestBathUI",{attrs:{selectedForestBath:e.selectedForestBath},on:{showBirdView:e.showBirdView,showSquirrelView:e.showSquirrelView,showInsectView:e.showInsectView}})],1)},ht=[],gt=new oe["G"],mt=new qe["a"](gt),pt=window.innerWidth,ft=window.innerHeight,vt=new oe["ab"],wt=[],bt=new oe["tb"],yt={name:"Tree",data:function(){return{zoomedOut:!1,animating:!0,hoveredPoint:null,mouseX:0,mouseY:0}},props:{selectedForestBath:String},components:{ForestBathUI:Ze},mounted:function(){h=new oe["T"](75,pt/ft,.01,15e4),h.position.set(0,0,0),g=new oe["xb"]({antialias:!1,alpha:!1}),g.setSize(pt,ft),p=new oe["bb"],h.position.y=100,p.add(h),this.setupRenderer(),this.setupLights(),this.bindEvents(),this.onWindowResize(),m=new re["a"](h,g.domElement),m.autoRotate=!1,m.enableZoom=!0;var e=this;mt.load("./models/maps/2-reduced.ply",(function(t){f=new oe["W"](t,new oe["X"]({size:2,vertexColors:oe["wb"]})),f.geometry.computeBoundingBox(),f.geometry.center(),f.scale.set(15,15,15),f.rotateX(Math.PI/2),f.rotateY(Math.PI/2*2),p.add(f),e.animate(),e.addLights(),e.tweenOut()}))},methods:{showInsectView:function(){this.$emit("goToForestBath","insect")},showBirdView:function(){},showSquirrelView:function(){this.$emit("goToForestBath")},close:function(){this.$emit("closeForestMap")},raycast:function(){vt.setFromCamera(bt,h);var e=vt.intersectObjects(wt,!1);e.length>0?(this.hoveredPoint=e[0].object.name,document.body.style.cursor="pointer"):(this.hoveredPoint=null,document.body.style.cursor="default")},updateMousePosition:function(){var e=g.domElement.getBoundingClientRect();bt.x=(this.mouseX-e.left)/e.width*2-1,bt.y=-(this.mouseY-e.top)/e.height*2+1,wt.length>0&&this.raycast()},onMouseMove:function(e){e.preventDefault(),this.mouseX=e.clientX,this.mouseY=e.clientY},addLights:function(){var e=new oe["l"](16777215,1);p.add(e)},tweenOut:function(){var e=this;new ae["a"].Tween(h.position).to({y:1500},2e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){e.zoomedOut=!0})).start(),new ae["a"].Tween(f.rotation).to({z:-Math.PI/2},2e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},destroyScene:function(){p.remove(f),wt.forEach((function(e){return p.remove(e)})),g.renderLists.dispose(),g.dispose(),f=null,p.traverse((function(e){if(e.geometry&&e.geometry.dispose(),e.material)if(e.material.isMaterial)e.material.dispose();else{var t,s=Object(ie["a"])(e.material);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.dispose()}}catch(c){s.e(c)}finally{s.f()}}if(e.isMesh){e.geometry.dispose();var o=function(e){e.dispose();for(var t=0,s=Object.keys(e);t<s.length;t++){var i=s[t],o=e[i];o&&"object"===Object(se["a"])(o)&&"minFilter"in o&&o.dispose()}};if(e.material.isMaterial)o(e.material);else{var a,n=Object(ie["a"])(e.material);try{for(n.s();!(a=n.n()).done;){var r=a.value;o(r)}}catch(c){n.e(c)}finally{n.f()}}}}))},animate:function(){var e=this,t=function t(){e.animating&&(ae["a"].update(),m.update(),g.render(p,h),e.updateMousePosition(),requestAnimationFrame(t))};t()},setupRenderer:function(){g.setClearColor(0,0),g.gammaOutput=!0,g.gammaFactor=1,g.setSize(pt,ft),g.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.$refs.three.appendChild(g.domElement)},setupLights:function(){var e=new oe["a"](16777215,1);p.add(e)},bindEvents:function(){var e=this;this.$refs.three.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.onWindowResize,!1),this.$refs.three.addEventListener("touchmove",this.onTouchMove),gt.onStart=function(){e.$emit("showLoader","LOADING MAP")},gt.onLoad=function(){e.$emit("hideLoader")}},onWindowResize:function(){pt=window.innerWidth,ft=window.innerHeight,g.setSize(pt,ft),h.aspect=pt/ft,h.updateProjectionMatrix()}},beforeDestroy:function(){this.destroyScene(),this.animating=!1,g.domElement=null,g=null,m.dispose(),p=null,h=null,window.removeEventListener("resize",this.onWindowResize),this.$refs.three.removeEventListener("mousemove",this.onMouseMove),this.$refs.three.addEventListener("touchmove",this.onTouchMove)}},Ct=yt,Mt=(s("83bf"),Object(me["a"])(Ct,ut,ht,!1,null,"030b6df8",null)),Ft=Mt.exports,Tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-transition-container"},[s("h1",[e._v(e._s(e.$t("forest-view.simulating-forest")))]),e._m(0)])},Pt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-transition"},[s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/1.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/2.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/3.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/4.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/5.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/6.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/7.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/8.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/9.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/10.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/11.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/12.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/13.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/14.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/15.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/16.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/17.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/18.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/19.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/20.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/21.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/22.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/23.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/24.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/25.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/26.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/27.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/28.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/29.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/30.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/31.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/32.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/33.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/34.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/35.jpg"}}),s("img",{staticClass:"grid-image",attrs:{src:"/images/forest-transition/36.jpg"}})])}],_t=(s("a630"),{name:"gridTransition",components:{},props:{},watch:{},data:function(){return{}},mounted:function(){this.startGridTransition()},methods:{shuffleArray:function(e){for(var t=e.length-1;t>0;t-=1){var s=Math.floor(Math.random()*(t+1)),i=[e[s],e[t]];e[t]=i[0],e[s]=i[1]}return e},startGridTransition:function(){var e=this;this.transitioningIn=!0,setTimeout((function(){for(var t=Array.from(document.querySelectorAll(".grid-image")),s=e.shuffleArray(t),i=function(t){var i=s[t];setTimeout((function(){i.style.visibility="visible",35===t&&e.$emit("finishGridTransition")}),50*t)},o=0;o<36;o+=1)i(o)}),0)}},beforeDestroy:function(){}}),xt=_t,Lt=(s("0455"),Object(me["a"])(xt,Tt,Pt,!1,null,"2df5e38b",null)),St=Lt.exports,Rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"root"},[e.isLoading?e._e():s("div",[s("transition",{attrs:{name:"slowfade"}},[e.zoomedOut?s("h1",[e._v(e._s(e.$t("forest-view.choose-entry")))]):e._e()]),s("transition",{attrs:{name:"fade"}}),s("div",{staticClass:"charts-container"},[s("div",{staticClass:"outer-wrapper"},[s("div",{staticClass:"first-percentage"},[e._v("--")]),s("div",{staticClass:"column-wrapper"},[s("div",{staticClass:"label-image-container"},["en"===e.$i18n.locale?s("img",{staticClass:"label-image",attrs:{src:"/images/ui/biodiversity.png"}}):s("img",{staticClass:"label-image",attrs:{src:"/images/ui/biodiversity-jp.png"}})]),s("div",{staticClass:"column-one"})])]),s("div",{staticClass:"outer-wrapper"},[s("div",{staticClass:"second-percentage"},[e._v("--")]),s("div",{staticClass:"column-wrapper"},[s("div",{staticClass:"label-image-container"},["en"===e.$i18n.locale?s("img",{staticClass:"label-image",attrs:{src:"/images/ui/carbon-captured.png"}}):s("img",{staticClass:"label-image",attrs:{src:"/images/ui/carbon-captured-jp.png"}})]),s("div",{staticClass:"column-two"})])]),s("div",{staticClass:"outer-wrapper"},[s("div",{staticClass:"third-percentage"},[e._v("--")]),s("div",{staticClass:"column-wrapper"},[s("div",{staticClass:"label-image-container"},["en"===e.$i18n.locale?s("img",{staticClass:"label-image",attrs:{src:"/images/ui/photosynthesis.png"}}):s("img",{staticClass:"label-image",attrs:{src:"/images/ui/photosynthesis-jp.png"}})]),s("div",{staticClass:"column-three"})])])])],1),s("div",{ref:"three",staticClass:"scene-container"})])},$t=[],Et=(s("25f0"),new oe["G"]),jt=new qe["a"](Et),Vt=window.innerWidth,kt=window.innerHeight,Bt=new oe["ab"],Ot=[],It=new oe["tb"],zt={name:"Tree",data:function(){return{zoomedOut:!1,animating:!0,hoveredPoint:null,mouseX:0,mouseY:0,isShowingQRCodePopout:!1}},props:{selectedForest:String,subPage:Number,isLoading:Boolean},watch:{subPage:function(e){1===e?this.close(!1):0===e&&this.$emit("goToForestVisualisationVR")}},mounted:function(){this.startGraphAnimation(),v=new oe["T"](75,Vt/kt,.01,15e4),v.position.set(0,1850,350),w=new oe["xb"]({antialias:!1,alpha:!1}),w.setSize(Vt,kt),y=new oe["bb"],y.add(v),this.setupRenderer(),this.setupLights(),this.bindEvents(),this.onWindowResize(),b=new re["a"](v,w.domElement),b.autoRotate=!1,b.enableZoom=!0;var e=this;jt.load("./models/maps/2-reduced.ply",(function(t){C=new oe["W"](t,new oe["X"]({size:2,vertexColors:oe["wb"]})),C.geometry.computeBoundingBox(),C.geometry.center(),C.scale.set(17,17,17),C.rotateX(Math.PI/2),C.rotateY(Math.PI/2*2),C.rotateZ(-Math.PI/2),y.add(C),e.animate(),e.addLights(),setTimeout((function(){e.tweenOut()}),1e3)}))},methods:{getRandomArbitrary:function(e,t){return Math.random()*(t-e)+e},getColour:function(e){var t;return e>=90?t="#00E676":e<90&&e>=60?t="#81C784":e<60&&e>=40?t="#FFEB3B":e<40&&e>=10?t="#FF9800":e<10&&e>=0&&(t="#FF3D00"),t},startGraphAnimation:function(){var e=this;this.graphInterval=setInterval((function(){var t=e.getRandomArbitrary(50,80),s=e.getRandomArbitrary(40,70),i=e.getRandomArbitrary(20,40),o=e.getColour(t),a=e.getColour(s),n=e.getColour(i),r=document.querySelector(".column-one");r.style.background="linear-gradient(180deg, ".concat(o," 70%, rgba(255, 178, 178, 0) 80%)"),r.style.height="".concat(t,"%");var c=document.querySelector(".column-two");c.style.background="linear-gradient(180deg, ".concat(a," 40%, rgba(255, 178, 178, 0) 60%)"),c.style.height="".concat(s,"%");var l=document.querySelector(".column-three");l.style.background="linear-gradient(180deg, ".concat(n," 20%, rgba(255, 178, 178, 0) 40%)"),l.style.height="".concat(i,"%"),"en"===e.$i18n.locale?document.querySelector(".first-percentage").innerHTML="".concat(Math.round(t/10),"<br>Species"):document.querySelector(".first-percentage").innerHTML="".concat(Math.round(t/10),"<br>種"),document.querySelector(".second-percentage").innerHTML="".concat(Math.round(10*s/2),"<br>kg"),document.querySelector(".third-percentage").innerHTML="".concat(Math.round(i),"<br>%")}),1e3)},move:function(e){var t=0;function s(){t+=1,e.style.left="".concat(t,"px"),100===t&&clearInterval(i)}var i=setInterval(s,10)},openShare:function(){this.isShowingQRCodePopout=!this.isShowingQRCodePopout},close:function(e){this.$emit("closeForestMap",e)},raycast:function(){Bt.setFromCamera(It,v);var e=Bt.intersectObjects(Ot,!1);e.length>0?(this.hoveredPoint=e[0].object.name,document.body.style.cursor="pointer"):(this.hoveredPoint=null,document.body.style.cursor="default")},updateMousePosition:function(){var e=w.domElement.getBoundingClientRect();It.x=(this.mouseX-e.left)/e.width*2-1,It.y=-(this.mouseY-e.top)/e.height*2+1,Ot.length>0&&this.raycast()},onMouseMove:function(e){e.preventDefault(),this.mouseX=e.clientX,this.mouseY=e.clientY},addPointsOfInterest:function(){var e=new oe["gb"](120,32,32),t=new oe["O"]({color:9498256,transparent:!0,opacity:0,metalness:.99,roughness:.3,clearcoat:1,refractionRatio:.8}),s=new oe["K"](e,t);s.position.set(-550,0,550),y.add(s),Ot.push(s),s.name="LOCATION2";for(var i=0;i<5;i+=1){var o=Math.ceil(550*Math.random())*(Math.round(Math.random())?1:-1),a=Math.ceil(550*Math.random())*(Math.round(Math.random())?1:-1),n=s.clone();s.position.set(o,0,a),y.add(n),n.name="Point of Interest ".concat((i+2).toString()),Ot.push(n)}new ae["a"].Tween(s.material).to({opacity:.4},1e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},addLights:function(){var e=new oe["l"](16777215,1);y.add(e)},tweenOut:function(){var e=this;new ae["a"].Tween(v.position).to({y:1750},2e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){e.zoomedOut=!0,e.addPointsOfInterest()})).start()},destroyScene:function(){y.remove(C),Ot.forEach((function(e){return y.remove(e)})),w.renderLists.dispose(),w.dispose(),C=null,y.traverse((function(e){if(e.geometry&&e.geometry.dispose(),e.material)if(e.material.isMaterial)e.material.dispose();else{var t,s=Object(ie["a"])(e.material);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.dispose()}}catch(c){s.e(c)}finally{s.f()}}if(e.isMesh){e.geometry.dispose();var o=function(e){e.dispose();for(var t=0,s=Object.keys(e);t<s.length;t++){var i=s[t],o=e[i];o&&"object"===Object(se["a"])(o)&&"minFilter"in o&&o.dispose()}};if(e.material.isMaterial)o(e.material);else{var a,n=Object(ie["a"])(e.material);try{for(n.s();!(a=n.n()).done;){var r=a.value;o(r)}}catch(c){n.e(c)}finally{n.f()}}}}))},animate:function(){var e=this,t=function t(){e.animating&&(ae["a"].update(),b.update(),w.render(y,v),e.updateMousePosition(),requestAnimationFrame(t))};t()},setupRenderer:function(){w.setClearColor(0,0),w.gammaOutput=!0,w.gammaFactor=1,w.setSize(Vt,kt),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.$refs.three.appendChild(w.domElement)},setupLights:function(){var e=new oe["a"](16777215,1);y.add(e)},onClick:function(){this.hoveredPoint&&("Point of Interest 2"===this.hoveredPoint?this.close(!0):this.close(!1))},bindEvents:function(){var e=this;this.$refs.three.addEventListener("click",this.onClick),this.$refs.three.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.onWindowResize,!1),this.$refs.three.addEventListener("touchmove",this.onTouchMove),Et.onStart=function(){},Et.onLoad=function(){e.$emit("hideGridTransition")}},onWindowResize:function(){Vt=window.innerWidth,kt=window.innerHeight,w.setSize(Vt,kt),v.aspect=Vt/kt,v.updateProjectionMatrix()}},beforeDestroy:function(){this.destroyScene(),clearInterval(this.graphInterval),this.animating=!1,w.domElement=null,w=null,b.dispose(),y=null,v=null,window.removeEventListener("resize",this.onWindowResize),this.$refs.three.removeEventListener("mousemove",this.onMouseMove),this.$refs.three.removeEventListener("touchmove",this.onTouchMove),this.$refs.three.removeEventListener("click",this.onClick)}},Wt=zt,At=(s("76fd"),Object(me["a"])(Wt,Rt,$t,!1,null,"324f2d06",null)),Gt=At.exports,Nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"discover-container"},[s("div",{staticClass:"stories-container"},[s("div",{staticClass:"story"},[s("img",{staticClass:"story-image",attrs:{src:"/images/discover/discover1.png"}}),s("p",[e._v(e._s(e.$t("discover-page.first")))]),e._m(0)]),s("div",{staticClass:"story"},[s("img",{staticClass:"story-image",attrs:{src:"/images/discover/discover2.png"}}),s("p",[e._v(e._s(e.$t("discover-page.second")))]),e._m(1)]),s("div",{staticClass:"story"},[s("img",{staticClass:"story-image",attrs:{src:"/images/discover/discover3.png"}}),s("p",[e._v(e._s(e.$t("discover-page.third")))]),e._m(2)]),s("div",{staticClass:"story"},[s("img",{staticClass:"story-image",attrs:{src:"/images/discover/discover4.png"}}),s("p",[e._v(e._s(e.$t("discover-page.fourth")))]),e._m(3)]),s("div",{staticClass:"story"},[s("img",{staticClass:"story-image",attrs:{src:"/images/discover/discover5.png"}}),s("p",[e._v(e._s(e.$t("discover-page.fifth")))]),e._m(4)]),s("div",{staticClass:"story"},[s("img",{staticClass:"story-image",attrs:{src:"/images/discover/discover6.png"}}),s("p",[e._v(e._s(e.$t("discover-page.sixth")))]),e._m(5)])])])},Xt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"score"},[s("img",{staticClass:"heart",attrs:{src:"/images/ui/heart-icon-trimmy.png"}}),s("span",{staticClass:"score-text"},[e._v("63")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"score"},[s("img",{staticClass:"heart",attrs:{src:"/images/ui/heart-icon-trimmy.png"}}),s("span",{staticClass:"score-text"},[e._v("401")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"score"},[s("img",{staticClass:"heart",attrs:{src:"/images/ui/heart-icon-trimmy.png"}}),s("span",{staticClass:"score-text"},[e._v("1,120")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"score"},[s("img",{staticClass:"heart",attrs:{src:"/images/ui/heart-icon-trimmy.png"}}),s("span",{staticClass:"score-text"},[e._v("678")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"score"},[s("img",{staticClass:"heart",attrs:{src:"/images/ui/heart-icon-trimmy.png"}}),s("span",{staticClass:"score-text"},[e._v("981")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"score"},[s("img",{staticClass:"heart",attrs:{src:"/images/ui/heart-icon-trimmy.png"}}),s("span",{staticClass:"score-text"},[e._v("325")])])}],Ht={name:"discover",mounted:function(){document.body.addEventListener("mousewheel",(function(e){window.scrollBy(e.deltaY,0)}))},data:function(){return{}}},Yt=Ht,qt=(s("b212"),Object(me["a"])(Yt,Nt,Xt,!1,null,"5a2fa2b4",null)),Dt=qt.exports,Qt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my-forest-login-container"},[s("div",{staticClass:"my-forest-login"},[s("div",{staticClass:"top"},[s("div",{staticClass:"top-text-container"},[s("p",[e._v(e._s(e.$t("log-in-page.username"))+": "),s("span",{staticClass:"blinking"},[e._v("_______")])]),s("p",[e._v(e._s(e.$t("log-in-page.password"))+": "),s("span",{staticClass:"blinking"},[e._v("_______")])])])]),s("div",{staticClass:"bottom"},[s("button",{staticClass:"enter-forest-button",on:{click:e.goToMyForest}},[e._v(" "+e._s(e.$t("log-in-page.submit"))+" ")])])])])},Ut=[],Jt={name:"my-forest-login",methods:{close:function(){this.$emit("closeMyForestLogin")},goToMyForest:function(){this.close(),this.$emit("goToMyForest")}}},Kt=Jt,Zt=(s("fb71"),Object(me["a"])(Kt,Qt,Ut,!1,null,"029c1f4f",null)),es=Zt.exports,ts=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"root"},[s("MyForestUI",{attrs:{showingMyForestStats:e.showingMyForestStats}}),s("transition",{attrs:{name:"fade"}},[s("GlobeTooltip",{attrs:{hoveredPoint:e.hoveredPoint,mouseX:e.mouseX,mouseY:e.mouseY}})],1),s("transition",{attrs:{name:"fade"}},[e.zoomedOut?s("div",{staticClass:"forest-map-key"}):e._e()]),s("div",{ref:"three",staticClass:"scene-container"})],1)},ss=[],is=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my-forest-ui-container"},[s("transition",{attrs:{name:"fade"}},[e.showingVr?s("div",{staticClass:"vr-code-container"},[s("div",{staticClass:"vr-code"},[s("vue-qrcode",{attrs:{width:"200",value:e.qrValue}}),s("p",[e._v(e._s(e.$t("forest-view.vr-scan")))])],1)]):e._e()]),s("div",{staticClass:"bottom-icons-container"},[s("div",{staticClass:"challenge-icon-container"},["en"===e.$i18n.locale?s("img",{attrs:{src:"/images/ui/challenge-icon.png"},on:{click:e.toggleChallenge}}):s("img",{attrs:{src:"/images/ui/challenge-icon-jp.png"},on:{click:e.toggleChallenge}})])]),s("div",{staticClass:"buttons-container"},[s("div",{staticClass:"vr"},[s("img",{attrs:{src:"/images/ui/vr-icon.png"},on:{click:e.toggleVR}})]),s("div",{staticClass:"share"},[s("img",{attrs:{src:"/images/ui/share-icon.png"},on:{click:e.toggleShare}})])]),s("div",{staticClass:"co2-level-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.treeCount,expression:"treeCount"}],staticClass:"co2-input",attrs:{name:"co2",min:"0",max:"60",value:"30",step:"1",type:"range"},domProps:{value:e.treeCount},on:{__r:function(t){e.treeCount=t.target.value}}}),s("meter",{staticClass:"meter",attrs:{min:"0",max:"60",value:e.treeCount}}),s("h2",[e._v(e._s(e.$t("my-forest.my-carbon-footprint")))]),s("p",{staticClass:"counter"},[e._v(" "+e._s(e.treeCount)+" kg ")]),s("label",{attrs:{for:"range"}})]),s("transition",{attrs:{name:"fade"}},[e.showingShare?s("div",{staticClass:"share-container"},[s("img",{staticClass:"share-box",attrs:{src:"/images/ui/share.png"}})]):e._e()]),s("transition",{attrs:{name:"fade"}},[e.showingChallenge?s("div",{staticClass:"challenge-container"},[s("div",{staticClass:"challenge-box"},[s("div",{staticClass:"padder"}),"en"===e.$i18n.locale?s("img",{staticClass:"challenge-header",attrs:{src:"/images/ui/challenge-ui-title.png"}}):s("img",{staticClass:"challenge-header",attrs:{src:"/images/ui/challenge-ui-title-jp.png"}}),s("div",{staticClass:"challenge-info-container"},[s("img",{staticClass:"statistics-ui",attrs:{src:"/images/ui/challenges-icon.png"}})]),s("div",{staticClass:"challenges-container"},["en"===e.$i18n.locale?s("img",{staticClass:"challenge",attrs:{src:"/images/ui/challenge-top-ui.png"},on:{click:e.toggleScore}}):s("img",{staticClass:"challenge",attrs:{src:"/images/ui/challenge-top-ui-jp.png"},on:{click:e.toggleScore}}),"en"===e.$i18n.locale?s("img",{staticClass:"challenge",attrs:{src:"/images/ui/challenge-bottom-ui.png"},on:{click:e.toggleScore}}):s("img",{staticClass:"challenge",attrs:{src:"/images/ui/challenge-bottom-ui-jp.png"},on:{click:e.toggleScore}})]),s("img",{staticClass:"challenge-bottom-arrow",attrs:{src:"/images/ui/challenge-bottom-arrow.png"}})])]):e._e()]),s("transition",{attrs:{name:"fade"}},[e.showingScore?s("div",{staticClass:"score-container",on:{click:e.toggleScore}},[s("div",{staticClass:"score-box"},[s("div",{staticClass:"padder"}),"en"===e.$i18n.locale?s("img",{staticClass:"score-header",attrs:{src:"/images/ui/score-ui-title.png"}}):s("img",{staticClass:"score-header",attrs:{src:"/images/ui/score-ui-title-jp.png"}}),s("div",{staticClass:"score-info-container"},[s("div",{staticClass:"statistics-container"},["en"===e.$i18n.locale?s("img",{staticClass:"statistics-ui",attrs:{src:"/images/ui/statistics.png"}}):s("img",{staticClass:"statistics-ui",attrs:{src:"/images/ui/statistics-jp.png"}})]),s("div",{staticClass:"right-side-container"},[s("div",{staticClass:"rewards-container"},[s("h3",[e._v(e._s(e.$t("my-forest.rewards")))]),s("div",{staticClass:"icons-container"},[s("img",{staticClass:"medal",attrs:{src:"/images/ui/medal-icon.png"}}),"en"===e.$i18n.locale?s("img",{staticClass:"rewards rain",attrs:{rc:"/images/ui/rain-icon.png"},on:{click:e.startRain}}):s("img",{staticClass:"rewards rain",attrs:{src:"/images/ui/rain-icon-jp.png"},on:{click:e.startRain}}),"en"===e.$i18n.locale?s("img",{staticClass:"rewards",attrs:{src:"/images/ui/nutrients-icon.png"}}):s("img",{staticClass:"rewards",attrs:{src:"/images/ui/nutrients-icon-jp.png"}}),"en"===e.$i18n.locale?s("img",{staticClass:"rewards",attrs:{src:"/images/ui/sun-icon.png"}}):s("img",{staticClass:"rewards",attrs:{src:"/images/ui/sun-icon-jp.png"}})]),s("div",{staticClass:"reward-bar"})]),s("div",{staticClass:"growth-container"},[s("h3",[e._v(e._s(e.$t("my-forest.growth")))]),s("TrendChart",{attrs:{datasets:[{data:e.chartData,smooth:!0,fill:!0,className:"chartLine"}],grid:{verticalLines:!1,horizontalLines:!1},min:0}})],1)])])])]):e._e()]),s("div",{staticClass:"transparent"},[s("transition",{attrs:{name:"fade"}},[e.showingMyForestStats?s("div",{staticClass:"user-info"},[s("div",{staticClass:"user-avatar"},[s("img",{staticClass:"avatar",attrs:{src:"/images/ui/avatar.png"}}),s("p",{staticClass:"level"},[e._v(e._s(e.$t("my-forest.account-level")))]),s("p",{staticClass:"last-active"},[e._v(" "+e._s(e.$t("my-forest.last-active"))+" ")])]),s("div",{staticClass:"linked-accounts-container"},[s("p",{staticClass:"linked-account"},[e._v(e._s(e.$t("my-forest.linked-accounts")))]),s("p",{staticClass:"linked-account"},[s("span",{staticClass:"name"},[e._v("Google Home")]),s("span",{staticClass:"logo-container"},[s("img",{staticClass:"logo",attrs:{src:"/images/brand-logos/google-home.png"}})])]),s("p",{staticClass:"linked-account"},[s("span",{staticClass:"name"},[e._v("Revolut")]),s("span",{staticClass:"logo-container"},[s("img",{staticClass:"logo",attrs:{src:"/images/brand-logos/revolut.png"}})])]),s("p",{staticClass:"linked-account"},[s("span",{staticClass:"name"},[e._v("Strava")]),s("span",{staticClass:"logo-container"},[s("img",{staticClass:"logo",attrs:{src:"/images/brand-logos/strava.png"}})])]),s("p",{staticClass:"linked-account no-border"},[s("span",{staticClass:"name"},[e._v("PASMO")]),s("span",{staticClass:"logo-container"},[s("img",{staticClass:"logo",attrs:{src:"/images/brand-logos/pasmo.png"}})])])])]):e._e()])],1)],1)},os=[],as=s("4ddc"),ns=s("9a13"),rs={name:"my-forest-ui",components:{TrendChart:as["a"],VueQrcode:ns["a"]},props:{showingMyForestStats:Boolean,isLoading:Boolean},data:function(){return{qrValue:"".concat(window.location.href,"?mobileVR"),showingVr:!1,showingShare:!1,showingChallenge:!1,showingScore:!1,treeCount:30,chartData:[10,50,20,100,40,60,80]}},watch:{treeCount:function(){this.$emit("changeTreeCount",this.treeCount)}},methods:{startRain:function(){this.$emit("startRain")},toggleVR:function(){this.showingVr=!this.showingVr,this.showingShare=!1},toggleShare:function(){this.showingShare=!this.showingShare,this.showingVr=!1},toggleScore:function(){var e=this;this.showingChallenge=!1,this.showingScore=!this.showingScore,this.showingScore?M=setInterval((function(){e.chartData.shift(),e.chartData.push(40*Math.random()+40)}),1e3):clearInterval(M)},toggleChallenge:function(){this.showingScore=!1,this.showingChallenge=!this.showingChallenge}}},cs=rs,ls=(s("a7f7"),s("055f"),Object(me["a"])(cs,is,os,!1,null,"6db78084",null)),ds=ls.exports,us=new oe["G"],hs=new qe["a"](us),gs=window.innerWidth,ms=window.innerHeight,ps=new oe["ab"],fs=[],vs=new oe["tb"],ws={name:"Tree",data:function(){return{zoomedOut:!1,animating:!0,hoveredPoint:null,mouseX:0,mouseY:0}},props:{subPage:Number,showingMyForestStats:Boolean},watch:{subPage:function(e){0===e?this.$emit("goToMyForestVisualisationVR"):1===e&&this.$emit("goToMyForest")}},components:{GlobeTooltip:fe,MyForestUI:ds},mounted:function(){F=new oe["T"](75,gs/ms,.01,15e4),F.position.set(0,0,0),T=new oe["xb"]({antialias:!1,alpha:!1}),T.setSize(gs,ms),_=new oe["bb"],F.position.y=100,_.add(F),this.setupRenderer(),this.setupLights(),this.bindEvents(),this.onWindowResize(),P=new re["a"](F,T.domElement),P.autoRotate=!1,P.enableZoom=!0;var e=this;hs.load("./models/maps/2-reduced.ply",(function(t){x=new oe["W"](t,new oe["X"]({size:2,vertexColors:oe["wb"]})),x.geometry.computeBoundingBox(),x.geometry.center(),x.scale.set(15,15,15),x.rotateX(Math.PI/2),x.rotateY(Math.PI/2*2),_.add(x),e.animate(),e.addLights(),e.tweenOut()}))},methods:{close:function(){this.$emit("closeForestMap")},raycast:function(){ps.setFromCamera(vs,F);var e=ps.intersectObjects(fs,!1);e.length>0?(this.hoveredPoint=e[0].object.name,document.body.style.cursor="pointer"):(this.hoveredPoint=null,document.body.style.cursor="default")},updateMousePosition:function(){var e=T.domElement.getBoundingClientRect();vs.x=(this.mouseX-e.left)/e.width*2-1,vs.y=-(this.mouseY-e.top)/e.height*2+1,fs.length>0&&this.raycast()},onMouseMove:function(e){e.preventDefault(),this.mouseX=e.clientX,this.mouseY=e.clientY},addPointsOfInterest:function(){var e=new oe["gb"](120,32,32),t=new oe["O"]({color:9498256,transparent:!0,opacity:0,metalness:.99,roughness:.3,clearcoat:1,refractionRatio:.8}),s=new oe["K"](e,t);s.position.set(-550,0,550),_.add(s),fs.push(s),s.name="Point of Interest 1";for(var i=0;i<5;i+=1){var o=Math.ceil(550*Math.random())*(Math.round(Math.random())?1:-1),a=Math.ceil(550*Math.random())*(Math.round(Math.random())?1:-1),n=s.clone();s.position.set(o,0,a),_.add(n),n.name="Point of Interest ".concat((i+2).toString()),fs.push(n)}new ae["a"].Tween(s.material).to({opacity:.4},1e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},addLights:function(){var e=new oe["l"](16777215,1);_.add(e)},tweenOut:function(){var e=this;new ae["a"].Tween(F.position).to({y:1500},2e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){e.zoomedOut=!0,e.addPointsOfInterest()})).start(),new ae["a"].Tween(x.rotation).to({z:-Math.PI/2},2e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},destroyScene:function(){_.remove(x),fs.forEach((function(e){return _.remove(e)})),T.renderLists.dispose(),T.dispose(),x=null,_.traverse((function(e){if(e.geometry&&e.geometry.dispose(),e.material)if(e.material.isMaterial)e.material.dispose();else{var t,s=Object(ie["a"])(e.material);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.dispose()}}catch(c){s.e(c)}finally{s.f()}}if(e.isMesh){var o=function(e){e.dispose();for(var t=0,s=Object.keys(e);t<s.length;t++){var i=s[t],o=e[i];o&&"object"===Object(se["a"])(o)&&"minFilter"in o&&o.dispose()}};if(e.geometry.dispose(),e.material.isMaterial)o(e.material);else{var a,n=Object(ie["a"])(e.material);try{for(n.s();!(a=n.n()).done;){var r=a.value;o(r)}}catch(c){n.e(c)}finally{n.f()}}}}))},animate:function(){var e=this,t=function t(){e.animating&&(ae["a"].update(),P.update(),T.render(_,F),e.updateMousePosition(),requestAnimationFrame(t))};t()},setupRenderer:function(){T.setClearColor(0,0),T.gammaOutput=!0,T.gammaFactor=1,T.setSize(gs,ms),T.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.$refs.three.appendChild(T.domElement)},setupLights:function(){var e=new oe["a"](16777215,1);_.add(e)},bindEvents:function(){var e=this;this.$refs.three.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.onWindowResize,!1),this.$refs.three.addEventListener("touchmove",this.onTouchMove),us.onStart=function(){e.$emit("showLoader","LOADING MAP")},us.onLoad=function(){e.$emit("hideLoader")}},onWindowResize:function(){gs=window.innerWidth,ms=window.innerHeight,T.setSize(gs,ms),F.aspect=gs/ms,F.updateProjectionMatrix()}},beforeDestroy:function(){this.destroyScene(),this.animating=!1,T.domElement=null,T=null,P.dispose(),_=null,F=null,window.removeEventListener("resize",this.onWindowResize),this.$refs.three.removeEventListener("mousemove",this.onMouseMove),this.$refs.three.addEventListener("touchmove",this.onTouchMove)}},bs=ws,ys=(s("075a"),Object(me["a"])(bs,ts,ss,!1,null,"53bccb3d",null)),Cs=ys.exports,Ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loader-container"},[s("p",{staticClass:"loading-message"},[e._v(e._s(e.loadingMessage))]),s("div",{staticClass:"loader"},e._l(e.blocksToShow,(function(e){return s("div",{key:e},[s("div",{staticClass:"loading-block"})])})),0)])},Fs=[],Ts={name:"Tree",props:{loadingMessage:String},mounted:function(){var e=this,t=setInterval((function(){e.blocksToShow<11?e.blocksToShow+=1:clearInterval(t)}),5e3)},data:function(){return{blocksToShow:1}}},Ps=Ts,_s=(s("af11"),Object(me["a"])(Ps,Ms,Fs,!1,null,"30302ecf",null)),xs=_s.exports,Ls=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vr-screen-container"},[s("h1",[e._v("VR")]),s("vue-qrcode",{attrs:{value:e.value}})],1)},Ss=[],Rs={name:"vr-screen",components:{VueQrcode:ns["a"]},props:{subPage:Number,selectedForest:String},watch:{subPage:function(e){1===e?this.$emit("goToForestVisualisation",this.selectedForest):2===e&&this.$emit("goToForestMap")}},data:function(){return{value:"".concat(window.location.href,"?mobileVR")}}},$s=Rs,Es=(s("0fb2"),Object(me["a"])($s,Ls,Ss,!1,null,"7770dc1b",null)),js=Es.exports,Vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vr-screen-container"},[s("MyForestUI",{attrs:{showingMyForestStats:e.showingMyForestStats}}),s("h1",[e._v("VR")]),s("vue-qrcode",{attrs:{value:e.value}})],1)},ks=[],Bs={name:"vr-screen",components:{VueQrcode:ns["a"],MyForestUI:ds},props:{subPage:Number,showingMyForestStats:Boolean},watch:{subPage:function(e){1===e?this.$emit("goToMyForest"):2===e&&this.$emit("goToMyForestMap")}},data:function(){return{value:"".concat(window.location.href,"?mobileVR")}}},Os=Bs,Is=(s("2762"),Object(me["a"])(Os,Vs,ks,!1,null,"1a1df4e4",null)),zs=Is.exports,Ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my-forest-container"},[e._m(0),e.isLoading?e._e():s("div",{staticClass:"my-forest-ui-container"},[s("MyForestUI",{attrs:{showingMyForestStats:e.showingMyForestStats,isLoading:e.isLoading},on:{changeTreeCount:e.changeTreeCount,startRain:e.startRain}})],1),s("div",{ref:"three",staticClass:"scene-container"})])},As=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("audio",{staticClass:"rainfall-sounds",attrs:{loop:""}},[s("source",{attrs:{src:"/audio/rain-sounds.mp3",type:"audio/mpeg"}})])}],Gs=(s("159b"),window.innerWidth),Ns=window.innerHeight,Xs=new oe["G"],Hs=new qe["a"](Xs),Ys=new oe["tb"],qs=new oe["tb"](window.innerWidth/2,window.innerHeight/2),Ds=[],Qs=[],Us=[],Js=new oe["t"],Ks=5e4,Zs={name:"MyForest",props:{showingMyForestStats:Boolean,subPage:Number,isLoading:Boolean},watch:{subPage:function(e){0===e?this.$emit("goToMyForestVisualisationVR"):2===e&&this.$emit("goToMyForestMap")}},data:function(){return{animating:!0,currentTreeCount:30,isRaining:!1}},components:{MyForestUI:ds},mounted:function(){L=new oe["T"](75,Gs/Ns,.01,15e3),L.position.set(850,250,1250),L.up=new oe["ub"](0,0,1),S=new oe["xb"]({antialias:!1,alpha:!1}),S.setSize(Gs,Ns),R=new oe["bb"],R.add(L),$=new re["a"](L,S.domElement),$.autoRotate=!0,$.enableZoom=!0,$.autoRotateSpeed=.5,$.target.set(0,-100,0),$.maxDistance=1500,this.setupRenderer(),this.setupLights(),this.bindEvents(),this.onWindowResize(),Hs.load("./models/tree-1-0.005.ply",(function(e){E=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),E.geometry.computeBoundingBox(),E.geometry.center(),E.scale.set(25,25,25),E.rotation.x=3*Math.PI,E.rotation.y=3*Math.PI,E.position.set(-150,0,0),Qs.push(E),Ds.push(E)})),Hs.load("./models/tree-2-0.005.ply",(function(e){O=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),O.geometry.computeBoundingBox(),O.geometry.center(),O.scale.set(25,25,25),O.rotation.x=3*Math.PI,O.rotation.y=3*Math.PI,O.position.set(-150,0,0),Qs.push(O),Ds.push(O)})),Hs.load("./models/tree-3-0.005.ply",(function(e){j=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),j.geometry.computeBoundingBox(),j.geometry.center(),j.scale.set(25,25,25),j.rotation.x=3*Math.PI,j.rotation.y=3*Math.PI,j.position.set(-750,0,0),Qs.push(j),Ds.push(j)})),Hs.load("./models/tree-4-0.005.ply",(function(e){V=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),V.geometry.computeBoundingBox(),V.geometry.center(),V.scale.set(45,45,45),V.rotation.x=3*Math.PI,V.rotation.y=3*Math.PI,V.position.set(-1e3,0,0),Qs.push(V),Ds.push(V)}))},methods:{startRain:function(){this.isRaining=!0;var e=new oe["v"](255,65280,.6);R.add(e),document.querySelector(".rainfall-sounds").play();for(var t=0;t<Ks;t+=1){var s=new oe["ub"](Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),1400*Math.random()-200);s.velocity={},s.velocity=0,Js.vertices.push(s)}var i=new oe["X"]({color:11184810,size:.5,transparent:!0});k=new oe["W"](Js,i);var o=new oe["mb"];o.load("/images/smoke.png",(function(e){for(var t=new oe["U"](500,500),s=new oe["M"]({map:e,transparent:!0}),i=0;i<25;i+=1){var o=new oe["K"](t,s);o.position.x=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),o.position.z=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),o.position.y=150,o.rotation.x=1.16,o.rotation.z=-.12,o.rotation.y=360*Math.random(),o.material.opacity=.6,Us.push(o)}})),R.add(k)},changeTreeCount:function(e){e<this.currentTreeCount?this.addTrees(Math.abs(e-this.currentTreeCount)):this.removeTrees(Math.abs(e-this.currentTreeCount))},addTrees:function(e){if(console.log(this.currentTreeCount),!(this.currentTreeCount<17)){for(var t=0;t<e;t+=1)this.createTree();this.currentTreeCount-=e}},removeTrees:function(e){for(var t=0;t<e;t+=1){var s=Ds.pop();s.geometry.dispose(),s.material.dispose(),R.remove(s)}this.currentTreeCount+=e},goToForestMap:function(){this.$emit("goToForestMap")},onMouseMove:function(e){Ys.x=e.clientX-qs.x,Ys.y=e.clientY-qs.x},tweenOut:function(){new ae["a"].Tween($.target).to({x:-100,y:-250,z:-100},5e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start(),new ae["a"].Tween(L.position).to({x:0,y:-100,z:-200},5e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},createTree:function(){var e=Qs[Math.floor(Math.random()*Qs.length)].clone();e.position.x=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),e.position.y=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),e.rotation.z=Math.floor(360*Math.random())+1,R.add(e),Ds.push(e)},placeTreeBatch:function(){for(var e=0;e<this.currentTreeCount;e+=1)this.createTree()},animate:function(){var e=this,t=function t(){e.animating&&(S.render(R,L),ae["a"].update(),$.update(),requestAnimationFrame(t),e.isRaining&&(Us.forEach((function(e){var t=e;t.rotation.z-=.002})),Js.vertices.forEach((function(e){var t=e;t.velocity-=.1+.1*Math.random(),t.z+=e.velocity,e.z<-200&&(t.z=200,t.velocity=0)})),Js.verticesNeedUpdate=!0,k.rotation.z+=.002,(Math.random()>.93||B.power>100)&&(B.power<100&&B.position.set(400*Math.random(),300+200*Math.random(),100),B.power=50+500*Math.random())))};t()},setupRenderer:function(){S.setClearColor(0,0),S.gammaOutput=!0,S.gammaFactor=1,S.setSize(Gs,Ns),S.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.$refs.three.appendChild(S.domElement)},setupLights:function(){var e=new oe["a"](16777215,1);R.add(e),B=new oe["V"](404873,30,500,1.7),B.position.set(200,300,100),R.add(B),R.fog=new oe["r"](1118495,.001)},bindEvents:function(){var e=this;window.addEventListener("resize",this.onWindowResize,!1),Xs.onStart=function(){e.isLoaded=!1,e.$emit("showLoader","loading forest...")},Xs.onLoad=function(){e.isLoaded=!0,e.placeTreeBatch(),e.animate(),e.$emit("hideLoader"),e.tweenOut()}},destroyScene:function(){R.remove(E),R.remove(O),R.remove(j),R.remove(V),S.renderLists.dispose(),S.dispose(),E=null,R.traverse((function(e){if(e.geometry&&e.geometry.dispose(),e.material)if(e.material.isMaterial)e.material.dispose();else{var t,s=Object(ie["a"])(e.material);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.dispose()}}catch(c){s.e(c)}finally{s.f()}}if(e.isMesh){e.geometry.dispose();var o=function(e){e.dispose();for(var t=0,s=Object.keys(e);t<s.length;t++){var i=s[t],o=e[i];o&&"object"===Object(se["a"])(o)&&"minFilter"in o&&o.dispose()}};if(e.material.isMaterial)o(e.material);else{var a,n=Object(ie["a"])(e.material);try{for(n.s();!(a=n.n()).done;){var r=a.value;o(r)}}catch(c){n.e(c)}finally{n.f()}}}})),Ds.forEach((function(e){return R.remove(e)}))},onWindowResize:function(){Gs=window.innerWidth,Ns=window.innerHeight,S.setSize(Gs,Ns),L.aspect=Gs/Ns,L.updateProjectionMatrix()}},beforeDestroy:function(){this.destroyScene(),this.animating=!1,S.domElement=null,S=null,$.dispose(),R=null,L=null,window.removeEventListener("resize",this.onWindowResize)}},ei=Zs,ti=(s("0222"),Object(me["a"])(ei,Ws,As,!1,null,"0d853a4e",null)),si=ti.exports,ii=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"root"},[s("transition",{attrs:{name:"fade"}},[e.currentPerspective?s("div",{staticClass:"pointcloud-video-generator-container"},[s("PointcloudVideos",{attrs:{currentPerspective:e.currentPerspective},on:{exitVideoGenerator:e.exitVideoGenerator}})],1):e._e()]),s("div",[s("div",{ref:"tooltipContainer",staticClass:"tooltip-container"},[s("div",{staticClass:"tooltip"},[s("p",{ref:"tooltipText",domProps:{innerHTML:e._s(e.getInfoText())}})])]),s("div",{ref:"three",staticClass:"scene-container"}),e._m(0),e._m(1),e._m(2),s("transition",{attrs:{name:"fade"}},[e.isLoaded?s("div",[s("ForestVisualisationUI",{attrs:{selectedForest:e.selectedForest},on:{goToForestBath:e.goToForestBath,exitVideoGenerator:e.exitVideoGenerator,goToInsectPerspective:e.goToInsectPerspective,goToBirdPerspective:e.goToBirdPerspective}})],1):e._e()])],1)],1)},oi=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("audio",{staticClass:"forest-sounds",attrs:{loop:""}},[s("source",{attrs:{src:"/audio/forest-sounds.mp3",type:"audio/mpeg"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("audio",{staticClass:"synth-sounds",attrs:{loop:""}},[s("source",{attrs:{src:"/audio/synth-sounds.mp3",type:"audio/mpeg"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("audio",{staticClass:"rainfall-sounds",attrs:{loop:""}},[s("source",{attrs:{src:"/audio/rain-sounds.mp3",type:"audio/mpeg"}})])}],ai=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"exit",on:{click:e.exit}},[e._v(" ✕ ")]),s("div",{staticClass:"video-container",on:{click:e.exit}},["insect"===e.currentPerspective?s("video",{staticClass:"video",attrs:{loop:"",muted:"",autoplay:""},domProps:{muted:!0}},[s("source",{attrs:{src:"/videos/insect-view-compressed.mp4",type:"video/mp4"}})]):s("video",{staticClass:"video",attrs:{loop:"",muted:"",autoplay:""},domProps:{muted:!0}},[s("source",{attrs:{src:"/videos/bird-view-compressed.mp4",type:"video/mp4"}})])])])},ni=[],ri={name:"Scene",props:{currentPerspective:String},data:function(){return{}},methods:{exit:function(){this.$emit("exitVideoGenerator")}}},ci=ri,li=(s("c6c6"),Object(me["a"])(ci,ai,ni,!1,null,"081b1549",null)),di=li.exports,ui=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"forest-visualisation-ui-container"},[s("transition",{attrs:{name:"fade"}},[e.isShowingQRCodePopout?s("div",{staticClass:"share-container"},[s("img",{staticClass:"share-box",attrs:{src:"/images/ui/share.png"}})]):e._e()]),s("transition",{attrs:{name:"fade"}},[e.isShowingVRCodePopout?s("div",{staticClass:"vr-code-container"},[s("div",{staticClass:"vr-code"},[s("vue-qrcode",{attrs:{width:200,value:e.qrValue}}),s("p",[e._v(e._s(e.$t("forest-view.vr-scan")))])],1)]):e._e()]),s("transition",{attrs:{name:"fade"}},[e.isShowingPerspectivePopout?s("div",{staticClass:"perspective-popout-container"},[s("div",{staticClass:"perspective-popout"},[s("div",{staticClass:"left"},[s("p",[e._v(e._s(e.$t("forest-view.tour-forest")))]),s("div",{staticClass:"images"},[s("img",{staticClass:"icon-img",attrs:{src:"/images/ui/insect.png"},on:{click:function(t){return e.goToInsectPerspective()}}}),s("img",{staticClass:"icon-img",attrs:{src:"/images/ui/bird.png"},on:{click:function(t){return e.goToBirdPerspective()}}})])]),s("div",{staticClass:"right"},[s("p",[e._v(e._s(e.$t("forest-view.forest-bath")))]),s("div",{staticClass:"image"},[s("img",{staticClass:"icon-img",attrs:{src:"/images/ui/forest.png"},on:{click:function(t){return e.goToForestBath()}}})])])])]):e._e()]),s("div",{staticClass:"buttons-container"},[s("div",{staticClass:"vr"},[s("img",{attrs:{src:"/images/ui/vr-icon.png"},on:{click:function(t){return e.openVR()}}})]),s("div",{staticClass:"perspective"},[s("img",{attrs:{src:"/images/ui/perspective-icon.png"},on:{click:function(t){return e.openPerspective()}}})]),s("div",{staticClass:"share"},[s("img",{attrs:{src:"/images/ui/share-icon.png"},on:{click:function(t){return e.openShare()}}})])]),e.isBrandedForest?s("div",{staticClass:"logo-container"},[s("img",{staticClass:"brand-logo",attrs:{src:e.getLogoSrc()}})]):e._e()],1)},hi=[],gi=["Netflix","Lyft","Ecosia","Airfrance","Toyoshima","Nike","Nestle","Timberland","Adidas"],mi={name:"forest-visualisation-ui",props:{selectedForest:String,isLoading:Boolean},components:{VueQrcode:ns["a"]},computed:{isBrandedForest:function(){return!!gi.includes(this.selectedForest)}},data:function(){return{showForestHealth:!1,isShowingQRCodePopout:!1,isShowingVRCodePopout:!1,isShowingPerspectivePopout:!1,qrValue:"".concat(window.location.href,"?mobileVR")}},methods:{openVR:function(){this.isShowingPerspectivePopout=!1,this.isShowingQRCodePopout=!1,this.isShowingVRCodePopout=!this.isShowingVRCodePopout},goToBirdPerspective:function(){this.isShowingPerspectivePopout=!1,this.$emit("goToBirdPerspective")},goToInsectPerspective:function(){this.isShowingPerspectivePopout=!1,this.$emit("goToInsectPerspective")},goToForestBath:function(){this.isShowingPerspectivePopout=!1,this.$emit("goToForestBath")},openPerspective:function(){this.$emit("exitVideoGenerator"),this.isShowingVRCodePopout=!1,this.isShowingQRCodePopout=!1,this.isShowingPerspectivePopout=!this.isShowingPerspectivePopout},openShare:function(){this.isShowingVRCodePopout=!1,this.isShowingPerspectivePopout=!1,this.isShowingQRCodePopout=!this.isShowingQRCodePopout},getLogoSrc:function(){return"./images/brand-logos/".concat(this.selectedForest,".png")},toggleForestHealthModal:function(){this.showForestHealth=!this.showForestHealth},goToForestMap:function(){this.showForestHealth=!1,this.$emit("goToForestMap")}}},pi=mi,fi=(s("160e"),Object(me["a"])(pi,ui,hi,!1,null,"5bcde274",null)),vi=fi.exports,wi=new oe["G"],bi=new qe["a"](wi),yi=window.innerWidth,Ci=window.innerHeight,Mi=new oe["tb"],Fi=new oe["tb"],Ti=new oe["ab"],Pi=[],_i=[],xi=[],Li=new oe["t"],Si=2e4,Ri=[],$i={name:"forest-visualisation",data:function(){return{currentPerspective:null,isLoaded:!1,animating:!0,isRaining:!1,perspectiveMode:!1,intersection:null,showTooltip:!1,mouseX:0,mouseY:0}},props:{selectedForest:String,subPage:Number,loadLocationTwo:Boolean},components:{PointcloudVideos:di,ForestVisualisationUI:vi},watch:{subPage:function(e){2===e?this.goToForestMap():0===e&&this.$emit("goToForestVisualisationVR")}},mounted:function(){I=new oe["T"](75,yi/Ci,.01,15e3),I.position.set(50,75,-400),I.up=new oe["ub"](0,0,1),z=new oe["xb"]({antialias:!1,alpha:!1}),z.setSize(yi,Ci),W=new oe["bb"],W.add(I),A=new re["a"](I,z.domElement),A.autoRotate=!0,A.enableZoom=!0,A.autoRotateSpeed=.5,A.target.set(0,0,-400),window.orbitControls=A,window.camera=I,A.maxDistance=500,this.setupRenderer(),this.setupLights(),this.bindEvents(),this.onWindowResize(),!0===this.loadLocationTwo?bi.load("./models/flora_scans/location2-rgb.ply",(function(e){G=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),G.scale.set(25,25,25),G.name="location2",_i.push(G),G.position.set(0,0,-500),window.model=G})):(bi.load("./models/flora_scans/location2-rgb.ply",(function(e){G=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),G.scale.set(25,25,25),G.name="location2",_i.push(G),G.position.set(0,0,-500),window.model=G})),bi.load("./models/flora_scans/location1a-rgb.ply",(function(e){G=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),G.scale.set(25,25,25),G.name="location1a",G.position.set(0,0,-500),_i.push(G),window.model=G})),bi.load("./models/flora_scans/location1b-rgb.ply",(function(e){G=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),G.scale.set(25,25,25),G.name="location1b",G.position.set(0,0,-500),_i.push(G),window.model=G})),bi.load("./models/flora_scans/location1c-rgb.ply",(function(e){G=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),G.scale.set(25,25,25),G.name="location1c",G.position.set(0,0,-500),_i.push(G),window.model=G})),bi.load("./models/flora_scans/location1d-rgb.ply",(function(e){G=new oe["W"](e,new oe["X"]({size:1,vertexColors:oe["wb"]})),G.scale.set(25,25,25),G.name="location1d",G.position.set(0,0,-470),_i.push(G),window.model=G}))),this.createClickables(),this.$refs.three.addEventListener("mousemove",this.onMouseMove),window.addEventListener("click",this.onClick)},methods:{destroyClickables:function(){Ri.forEach((function(e){W.remove(e)})),Ri=[]},getInfoText:function(){var e;return e="en"===this.$i18n.locale?['This forest contains nearly 2,000 species and subspecies, including some of the most ancient living trees on the planet. One example is the famous <a href="#" style="color:#00FF00;text-decoration:none;">Jomon Sugi</a>, of an age estimated between 2,170 and 7,200 years.<br><br>Protected as a <a style="color:#00FF00;text-decoration:none;" href="#">UNESCO World Heritage</a>, the forest was an inspiration for Studio Ghibli’s Princess Mononoke.','Watching all ‘Star Wars’ movies emits <a href="#" style="color:#FF0000;text-decoration:none;">6 kg of CO2</span>. That is equivalent to a lightbulbrunning for 73 days. In fact, 60% of the internet’s emissions come from video streaming. <br><br>Netflix has partnered with <a href="#" style="color:#FF0000;text-decoration:none;">Eden Reforestation Projects</a> and committed to planting <a href="#" style="color:#FF0000;text-decoration:none;">1 million trees</span> in Bolivia to reduce its carbon footprint. Netflix has also supported an employment scheme for locals through this reforestation project.']:["屋久島の森には約2,000種の生物が生息しており、その中には地球上で最も長生きをしている樹木も含まれています。例として、有名な縄文杉は、推定樹齢が2,170年から7,200年と言われています","ユネスコの世界遺産として保護されているこの森は、スタジオジブリの「もののけ姫」のインスピレーションとなりました。<br><br>映画の中で、森の精霊は「シシガミ」と呼ばれ、生と死を司る神として描かれています。また、「こだま」と呼ばれる小さな精霊も杉の森に生息し、生態系の健康状態を表しています。","「スター・ウォーズ」の映画をすべて観ると、6kgのCO2が排出されます。これは、電球を73日間点灯し続けるのに相当します。実際、インターネットによる二酸化炭素排出量の60％は、ビデオストリーミングによるものです。 <br><br>Netflixは、Eden ReforestationProjectsと提携し、二酸化炭素排出量を削減するために、ボリビアに100万本の木を植えることを表明しました。Netflixは、この森林再生プロジェクトを通じて、現地の人々の雇用計画もサポートしています。 "],"".concat(e[Math.floor(Math.random()*e.length)])},onClick:function(){this.$refs.tooltipText&&(this.$refs.tooltipText.innerHTML=this.getInfoText(),this.intersection&&this.intersection.length>0?(this.showTooltip=!0,this.$refs.tooltipContainer.style.display="block",this.$refs.tooltipContainer.style.left="".concat(this.currentMouseX,"px"),this.$refs.tooltipContainer.style.top="".concat(this.currentMouseY-300,"px")):(this.showTooltip=!1,this.$refs.tooltipContainer.style.display="none"))},onMouseMove:function(e){this.currentMouseX=e.clientX,this.currentMouseY=e.clientY,Mi.x=e.clientX/window.innerWidth*2-1,Mi.y=-e.clientY/window.innerHeight*2+1,Ri.length>0&&this.raycast()},changeCameraType:function(){A.enabled=!1,I.position.x=0,I.position.z=0,I.rotation.x=0,I.rotation.y=0,I.rotation.z=0,this.perspectiveMode=!0,this.$emit("setToPerspectiveMode"),window.camera=I},addLensFlare:function(){W.background=(new oe["h"]).setPath("/images/textures/cubemaps/").load(["front.png","left.png","right.png","top.png","bottom.png","back.png"]);var e=new oe["V"](16777215,1.5,2e3);e.position.x=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),e.position.y=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),e.position.z=150},goToForestBath:function(){this.destroyClickables(),this.addLensFlare(),document.querySelector(".forest-sounds").play(),document.querySelector(".rainfall-sounds").play(),this.isRaining=!0;var e=new oe["v"](255,65280,.6);W.add(e);for(var t=0;t<Si;t+=1){var s=new oe["ub"](Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),1400*Math.random()-200);s.velocity={},s.velocity=0,Li.vertices.push(s)}var i=new oe["X"]({color:11184810,size:2.5,transparent:!0});Y=new oe["W"](Li,i),W.add(Y);var o=new oe["mb"];o.load("/images/smoke.png",(function(e){for(var t=new oe["U"](500,500),s=new oe["M"]({map:e,transparent:!0}),i=0;i<25;i+=1){var o=new oe["K"](t,s);o.position.x=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),o.position.y=Math.ceil(1500*Math.random())*(Math.round(Math.random())?1:-1),o.position.z=150,o.rotation.y=Math.PI,o.material.opacity=.6,xi.push(o),W.add(o)}}))},createClickables:function(){for(var e=(new oe["mb"]).load("/images/textures/plus-sprite.png"),t=0;t<3;t+=1){var s=new oe["ib"](new oe["jb"]({map:e}));s.position.x=Math.ceil(200*Math.random())*(Math.round(Math.random())?1:-1),s.position.y=Math.ceil(200*Math.random())*(Math.round(Math.random())?1:-1),s.position.z=-460,s.scale.set(15,15,15),W.add(s),Ri.push(s)}},exitVideoGenerator:function(){this.currentPerspective=null},goToInsectPerspective:function(){this.exitVideoGenerator(),this.currentPerspective="insect"},goToBirdPerspective:function(){this.exitVideoGenerator(),this.currentPerspective="bird"},goToForestMap:function(){this.$emit("goToForestMap")},tweenOut:function(){new ae["a"].Tween(A.target).to({x:0,y:0,z:-455},5e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start(),new ae["a"].Tween(I.position).to({x:5,y:5,z:-455},5e3).easing(ae["a"].Easing.Quartic.InOut).onComplete((function(){})).start()},createTree:function(){var e=_i[Math.floor(Math.random()*_i.length)].clone();W.add(e),Pi.push(e)},placeTreeBatch:function(){for(var e=0;e<1;e+=1)this.createTree()},animate:function(){var e=this,t=function t(){e.animating&&(z.render(W,I),ae["a"].update(),!0===e.perspectiveMode?(Fi.x=.002*(1-Mi.x),Fi.y=.002*(1-Mi.y),I.rotation.x+=.05*(Fi.y-I.rotation.x),I.rotation.y+=.05*(Fi.x-I.rotation.y)):A.update(),requestAnimationFrame(t),e.isRaining&&(xi.forEach((function(e){var t=e;t.rotation.z-=.002})),Li.vertices.forEach((function(e){var t=e;t.velocity-=.1+.1*Math.random(),t.z+=e.velocity,e.z<-700&&(t.z=200,t.velocity=0)})),Li.verticesNeedUpdate=!0,Y.rotation.z+=.002,(Math.random()>.93||q.power>100)&&(q.power<100&&q.position.set(400*Math.random(),300+200*Math.random(),100),q.power=50+500*Math.random())))};t()},setupRenderer:function(){z.setClearColor(0,0),z.gammaOutput=!0,z.gammaFactor=1,z.setSize(yi,Ci),z.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.$refs.three.appendChild(z.domElement)},setupLights:function(){var e=new oe["a"](16777215,1);W.add(e),W.fog=new oe["r"](1118495,.001),q=new oe["V"](404873,30,500,1.7),q.position.set(200,300,100),W.add(q)},bindEvents:function(){var e=this;window.addEventListener("resize",this.onWindowResize,!1),wi.onStart=function(){e.isLoaded=!1,e.$emit("showLoader","loading forest...")},wi.onLoad=function(){e.isLoaded=!0,e.placeTreeBatch(),e.animate(),e.$emit("hideLoader"),e.tweenOut()}},raycast:function(){Ti.setFromCamera(Mi,I),this.intersection=Ti.intersectObjects(Ri,!0),this.intersection.length>0?(A.autoRotate=!1,document.body.style.cursor="pointer"):(document.body.style.cursor="auto",A.autoRotate=!0,this.showTooltip=!1,this.$refs.tooltipContainer.style.display="none")},destroyScene:function(){W.remove(G),W.remove(N),W.remove(X),W.remove(H),z.renderLists.dispose(),z.dispose(),G=null,W.traverse((function(e){if(e.geometry&&e.geometry.dispose(),e.material)if(e.material.isMaterial)e.material.dispose();else{var t,s=Object(ie["a"])(e.material);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.dispose()}}catch(c){s.e(c)}finally{s.f()}}if(e.isMesh){e.geometry.dispose();var o=function(e){e.dispose();for(var t=0,s=Object.keys(e);t<s.length;t++){var i=s[t],o=e[i];o&&"object"===Object(se["a"])(o)&&"minFilter"in o&&o.dispose()}};if(e.material.isMaterial)o(e.material);else{var a,n=Object(ie["a"])(e.material);try{for(n.s();!(a=n.n()).done;){var r=a.value;o(r)}}catch(c){n.e(c)}finally{n.f()}}}})),Pi.forEach((function(e){return W.remove(e)}))},onWindowResize:function(){yi=window.innerWidth,Ci=window.innerHeight,z.setSize(yi,Ci),I.aspect=yi/Ci,I.updateProjectionMatrix()}},beforeDestroy:function(){this.destroyScene(),this.$refs.three.removeEventListener("mousemove",this.onMouseMove),this.animating=!1,z.domElement=null,z=null,A.dispose(),W=null,I=null,window.removeEventListener("resize",this.onWindowResize)}},Ei=$i,ji=(s("3982"),Object(me["a"])(Ei,ii,oi,!1,null,"31bcff63",null)),Vi=ji.exports,ki=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-vr"},[s("a-scene",[s("a-assets"),s("a-sky",{attrs:{color:"#000000"}}),s("a-entity",{attrs:{foo:"",position:"0 0 0"}})],1)],1)},Bi=[],Oi=(s("5bdf"),window.AFRAME.THREE),Ii=new Oi.LoadingManager,zi=new qe["a"](Ii),Wi={name:"mobile-vr",beforeMount:function(){},mounted:function(){this.$emit("showLoader");var e=this;window.AFRAME.registerComponent("foo",{init:function(){var t=this,s=e;this.el.addEventListener("loaded",(function(){zi.load("./models/flora_scans/location2-rgb.ply",(function(e){var i=new Oi.Points(e,new Oi.PointsMaterial({size:1,vertexColors:Oi.VertexColors}));i.scale.setScalar(30),i.scale.set(30,30,30),window.model=i,window.model.rotation.y=Math.PI,window.model.rotation.x=Math.PI/2,i.position.set(0,-50,0),t.el.setObject3D("mesh",i),s.$emit("hideLoader")}))}))}}),window.AFRAME.registerComponent("mythreejsthing",{schema:{color:{default:"#000"}},update:function(){var e=new Oi.MeshBasicMaterial({color:this.data.color,wireframe:!1}),t=new Oi.BoxGeometry(1,1,1);this.el.setObject3D("mesh",new Oi.Mesh(t,e))},remove:function(){this.el.removeObject3D("mesh")}})}},Ai=Wi,Gi=(s("4edc"),Object(me["a"])(Ai,ki,Bi,!1,null,"367721f8",null)),Ni=Gi.exports,Xi={name:"App",components:{Globe:Oe,MainUI:Xe,MyForest:si,ForestBath:dt,ForestBathBird:Ft,GridTransition:St,Discover:Dt,ForestVisualisation:Vi,ForestMap:Gt,LoadingSpinner:xs,MyForestLogin:es,ForestVisualisationVRScreen:js,MobileVR:Ni,MyForestMap:Cs,MyForestVisualisationVRScreen:zs},data:function(){return{page:"explore",loadLocationTwo:!1,subPage:0,showingMyLogin:!1,selectedForestBath:null,selectedForestBathView:"squirrel",selectedForest:null,isLoading:!1,loadingMessage:"Loading",showingMyForestLogin:!1,showingMyForestStats:!1,isInPerspectiveMode:!1,transitioningIntoMap:!1}},beforeMount:function(){var e=new URLSearchParams(location.search);e.has("mobileVR")&&(this.page="mobileVR")},methods:{setToPerspectiveMode:function(){this.isInPerspectiveMode=!0},setSubPage:function(e){this.subPage=e},toggleMyForestLogin:function(){"myForest"===this.page||"myForestMap"===this.page||"myForestVisualisationVR"===this.page?this.showingMyForestStats=!this.showingMyForestStats:this.showingMyForestLogin=!this.showingMyForestLogin},selectForestOnGlobe:function(e){this.selectedForestBath=e,this.goToForestBath()},goToMyForest:function(){this.isLoading=!0,this.showingMyForestLogin=!1,this.page="myForest",this.subPage=1},goToForestBathBird:function(){this.page="forestBathBird"},goToForestBath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"squirrel";this.selectedForestBathView=e,this.page="forestBath"},goToSearch:function(){this.subPage=0,this.page="search"},startGridTransition:function(e){this.selectedForest=e,this.transitioningIntoMap=!0},hideGridTransition:function(){var e=this;setTimeout((function(){e.transitioningIntoMap=!1}),1e3)},finishGridTransition:function(){this.goToForestMap()},goToForestVisualisation:function(e){this.isLoading=!0,this.subPage=1,e&&(this.selectedForest=e),this.page="forestVisualisation"},goToDiscover:function(){this.subPage=0,this.page="discover"},goToExplore:function(){this.page="explore"},goToForestMap:function(e){e&&(this.selectedForest=e),this.subPage=2,this.page="forestMap"},closeForestMap:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loadLocationTwo=!0===e,this.subPage=1,this.page="forestVisualisation"},goToForestVisualisationVR:function(){this.subPage=0,this.page="forestVisualisationVR"},goToMyForestVisualisationVR:function(){this.subPage=0,this.page="myForestVisualisationVR"},goToMyForestMap:function(){this.subPage=2,this.page="myForestMap"},showLoader:function(e){this.isLoading=!0,e&&(this.loadingMessage=e)},hideLoader:function(){this.isLoading=!1,this.loadingMessage="Loading"}}},Hi=Xi,Yi=(s("5c0b"),Object(me["a"])(Hi,K,Z,!1,null,null,null)),qi=Yi.exports;D["default"].config.productionTip=!1,D["default"].use(U.a),D["default"].use(J["a"]);var Di={en:s("26d5"),jp:s("bdfa")},Qi=new J["a"]({locale:"en",messages:Di});new D["default"]({i18n:Qi,render:function(e){return e(qi)}}).$mount("#app")},"5b8d":function(e,t,s){},"5c0b":function(e,t,s){"use strict";s("9c0c")},"5f4b":function(e,t,s){},"66d7":function(e,t,s){"use strict";s("2628")},"67b6":function(e,t,s){"use strict";s("40d8")},"6e3b":function(e,t,s){"use strict";s("4838")},"6fc5":function(e,t,s){},"748c":function(e,t,s){},"76fd":function(e,t,s){"use strict";s("4cc8")},"778c":function(e,t,s){},"7bdd":function(e,t,s){"use strict";s("5b8d")},"7c06":function(e,t,s){},"83bf":function(e,t,s){"use strict";s("a603")},"83e0":function(e,t,s){},8629:function(e){e.exports=JSON.parse('[{"name":"Valdivian","jp_name":"バルディビア","country":"Chile","type":"Rainforest","lat":-23.3,"lon":-127.62,"elevation":6046,"globe":"5.png"},{"name":"Maya Biosphere Reserve","jp_name":"マヤ生物圏保護区","country":"Guatemala","type":"Nature Reserve","lat":17.48,"lon":-148.8,"elevation":3976},{"name":"Yamanashi","jp_name":"山梨","country":"Japan","type":"Forest","lat":47.4,"lon":120.5,"elevation":3976,"globe":"3.png"},{"name":"Yakushima","jp_name":"屋久島","country":"Japan","type":"Temperate Ancient Forest","lat":43.4,"lon":110.5,"elevation":3976,"globe":"1.png"},{"name":"Kinabalu National Park","jp_name":"キナバル国立公園","country":"Malaysia","type":"Coniferous","lat":6.2,"lon":92.6,"elevation":3976},{"name":"Akasawa Natural Recreational Forest","jp_name":"赤沢","country":"Japan","type":"Coniferous","lat":47.4,"lon":115.5,"elevation":3976,"globe":"3.png"},{"name":"Epping Forest","jp_name":"エピング フォレスト","country":"United Kingdom","type":"Ancient woodland","lat":71.7,"lon":-50.16,"elevation":3976,"globe":"6.png"},{"name":"Aya Biosphere Reserve","jp_name":"アヤの照葉樹林","country":"Japan","type":"Lucidophyllous","lat":45.4,"lon":112.5,"elevation":3976,"globe":"1.png"}]')},"900c":function(e,t,s){},"9c0c":function(e,t,s){},a603:function(e,t,s){},a61b:function(e,t,s){},a7f7:function(e,t,s){"use strict";s("0d14")},aefc:function(e,t,s){"use strict";s("f965")},af11:function(e,t,s){"use strict";s("83e0")},b212:function(e,t,s){"use strict";s("123f")},b4e6:function(e,t,s){"use strict";s("748c")},bdfa:function(e){e.exports=JSON.parse('{"nav-bar":{"explore":"探索","search":"探す","discover":"発見する"},"about":"","about-the-project":"このプロジェクトについて ：このプロジェクトは、DLX Design Labと東京大学でリモートセンシングの研究をしている竹内研究室とのコラボレーションにより開発されました。このプロジェクトは、没入型の方法で森林の生態系をモニターし、体験するための仮想の森林探索です。この森林探索は、人々が、より透明性の高い森林プロジェクトを支援し、日常生活の中でより持続可能な意思決定を行うことを可能にします。","language":"言語","forest-view":{"simulating-forest":"森をシュミレーションする...","choose-entry":"入り口の選択 ","biodiversity":"生物多様性 ","eight-species":"種","carbon-capture":"炭素回収","photosynthesis":"光合成 ","forest-fact-one":"屋久島の森には約2,000種の生物が生息しており、その中には地球上で最も長生きをしている樹木も含まれています。例として、有名な縄文杉は、推定樹齢が2,170年から7,200年と言われています","search-placeholder":"プロジェクト、場所、キーワードなどで検索する","forest-fact-two":"ユネスコの世界遺産として保護されているこの森は、スタジオジブリの「もののけ姫」のインスピレーションとなりました。<br><br>映画の中で、森の精霊は「シシガミ」と呼ばれ、生と死を司る神として描かれています。また、「こだま」と呼ばれる小さな精霊も杉の森に生息し、生態系の健康状態を表しています。","forest-fact-three":"「スター・ウォーズ」の映画をすべて観ると、6kgのCO2が排出されます。これは、電球を73日間点灯し続けるのに相当します。実際、インターネットによる二酸化炭素排出量の60％は、ビデオストリーミングによるものです。 <br><br>Netflixは、Eden ReforestationProjectsと提携し、二酸化炭素排出量を削減するために、ボリビアに100万本の木を植えることを表明しました。Netflixは、この森林再生プロジェクトを通じて、現地の人々の雇用計画もサポートしています。 ","tour-forest":"別の視点から森のツアーに行く ","forest-bath":"森林浴をする","vr-scan":"QRコードを読み取ってVRで訪れる"},"my-forest":{"account-level":"レベル 5","last-active":"last active: 2/16/21 11:10AM","linked-accounts":"アカウント","challenge-title":"チャレンジ","bike-challenge":"自転車チャレンジ<br>期間：1週間 ","no-plastic-challenge":"ノープラスチックチャレンジ<br>期間： 1日","in-progress":"進行中","score-title":"得点","statistics":"統計データ","rewards":"報酬","growth":"成長","activity-breakdown":"活動の内訳","long-term":"長期","incomplete":"不完全","short-term":"短期","continue":"続ける","start":"スタート","rain":"雨","nutrients":"養分","sun":"太陽","my-carbon-footprint":"私の炭素排出量"},"search-page":{"input-placeholder":"プロジェクト、場所、キーワードなどで検索する"},"discover-page":{"first":"ブラジルの希少な鳥類","second":"アマゾンの木材の密売 ","third":"森林とコロナウイルスの関係","fourth":"大豆製品の森林破壊への影響 ","fifth":"アジアで最も古い木","sixth":"ボルネオ島の森がオリンピックに使われた"},"globe-page":{"about-the-project":"Text here..","valdivian":"バルディビア","maya-biosphere-reserve":"マヤ生物圏保護区 ","yamanashi":"山梨","yakushima":"屋久島 ","kinabalu-national-park":"キナバル国立公園","akasawa-natural-recreational-forest":"赤沢","epping-forest":"エピング フォレスト","aya-biosphere-reserve":"アヤの照葉樹林"},"log-in-page":{"username":"ユーザーネーム","password":"パスワード","submit":"マイフォレストに入る"}}')},c6c6:function(e,t,s){"use strict";s("2dbb")},cff1:function(e,t,s){"use strict";s("1948")},d24c:function(e,t,s){},de24:function(e,t,s){},ded3:function(e,t,s){},f965:function(e,t,s){},fb71:function(e,t,s){"use strict";s("d24c")}});
//# sourceMappingURL=app.e24f9ade.js.map